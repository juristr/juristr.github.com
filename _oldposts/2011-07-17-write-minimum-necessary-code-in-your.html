---
layout: post
title: "Write the Minimum Necessary Code In Your Unit Test Case That Makes It Valuable"
date: 2011-07-17
comments: false
tags: [  Unit Testing, Best Practices, Clean Code ]
---

Maintainability is of major importance in software development. Usually writing tests against your codebase increases maintainability in that it gives you some degree of freedom in making changes, at the same time assuring you did not break any existing logic. But, what needs to be kept in mind is that <b>tests need to be maintained as well</b> and that point should not be underestimated. Therefore, paying attention in writing maintainable tests is a very important ingredient for getting the most value out of your automated test suite (and for <a href="http://blog.js-development.com/2011/04/why-automated-tests-boost-your.html">boosting your development speed</a>).<br /><br />So, what are the major points of importance to achieve maintainable tests?<br /><a name='more'></a>Actually there are a bunch of them like<br /><ul><li>structuring tests according to the AAA principle (Arrange, Act, Assert) or</li><li>testing a single scenario per test case.</li></ul>Another important point is that you should only write the minimum necessary logic in your test setup that is required for your tests to verify the scenario it should. For instance if you have the following dummy method..<br /><pre class="brush:c#">...<br />public bool DoSomeInterestingStuff(MyStuff theStuff)<br />{<br />  if(theStuff.IsInteresting == false)<br />  {<br />     throw new ThisIsBoringStuffException();<br />  }<br /><br />  //start doing the really interesting stuff here<br />}<br /></pre>..and you'd like to verify that it throws an exception if the <code>IsInteresting</code> is not set to true, then you should only set that variable in your test setup, like<br /><pre class="brush:c#">[TestMethod]<br />public void TestDoSomeInterestingStuff_StuffIsNotInteresting_ShouldThrowException()<br />{<br />   //Arrange<br />   MyStuff someBoringStuff = new MyStuff<br />   {<br />      IsInteresting = false;<br />   };<br /><br />  //Act<br />  ...<br />}<br /></pre>The test setup should <b>just</b> contain the setting of the <code>IsInteresting</code> flag although <code>MyStuff</code> might have other properties as well. This assures that your test remains readable and clean. Someone else will immediately perceive the main intention of your test and moreover it remains maintainable as you don't have to modify your test setup in case you remove or add other properties to <code>MyStuff</code>.