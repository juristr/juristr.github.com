---
layout: post
title: "GWT Button with image AND text"
date: 2010-03-15
comments: true
tags: [  GWT, Web dev ]
---

GWT just provides the basic widgets like check boxes, hyperlinks, buttons etc...and leave the more complex ones to the developer or to 3rd party providers. For instance they don't have lists. Another thing which quite surprised me, their implementation of a button doesn't allow to have images AND text at the same time although a lot of Google products have it (Wave, GDocs, Gmail...).<br />With GWT buttons you have mainly two possibilities, using <code>Button</code> or <code>PushButton</code>. The first is just the standard one while the latter allows to assign an image which is passed in its constructor. But also the PushButton doesn't allow to have both, image AND text visualized...which somehow seems to be a use case which is quite requested. A search on the web brought me to the GWT's JavaDoc describing a CustomButton widget which can be used like this:<br /><pre class="prettyprint">&lt;g:PushButton ui:field='pushButton' enabled='true'&gt;<br /> &lt;g:upFace&gt;<br />  &lt;b&gt;click me&lt;/b&gt;<br /> &lt;/g:upFace&gt;<br /> &lt;g:upHoveringFace&gt;<br />  &lt;b&gt;Click ME!&lt;/b&gt;<br /> &lt;/g:upHoveringFace&gt;<br /> &lt;g:downFace image='{res.save}' /&gt;<br />&lt;/g:PushButton&gt;</pre><br />But also this kind of implementation doesn't allow you to have an image and text declaration...* uff *.<br /><br />So after that, <a href="http://blog.js-development.com/2010/02/gwt-hyperlink-widget-with-image.html">similar as for the Hyperlink</a>, I decided to implement one by myself. The implementation wasn't that difficult after all. Here's the source code:<br /><pre class="prettyprint">import com.google.gwt.resources.client.ImageResource;<br />import com.google.gwt.user.client.DOM;<br />import com.google.gwt.user.client.Element;<br />import com.google.gwt.user.client.ui.Button;<br />import com.google.gwt.user.client.ui.Image;<br /><br />public class CustomButton extends Button {<br /> private String text;<br /> <br /> public CustomButton(){<br />  super();<br /> }<br /> <br /> public void setResource(ImageResource imageResource){<br />  Image img = new Image(imageResource);<br />  String definedStyles = img.getElement().getAttribute("style");<br />  img.getElement().setAttribute("style", definedStyles + "; vertical-align:middle;");<br />  DOM.insertBefore(getElement(), img.getElement(), DOM.getFirstChild(getElement()));<br /> }<br /> <br /> @Override<br /> public void setText(String text) {<br />  this.text = text;<br />  Element span = DOM.createElement("span");<br />  span.setInnerText(text);<br />  span.setAttribute("style", "padding-left:3px; vertical-align:middle;");<br />  <br />  DOM.insertChild(getElement(), span, 0);<br /> }<br /> <br /> @Override<br /> public String getText() {<br />  return this.text;<br /> }<br />}<br /></pre>The according usage with the GWT UiBinder is the following:<br /><pre class="prettyprint">...<br />&lt;!-- Declaration of your ImageBundle --&gt;<br />&lt;ui:with field="res" type="com.sample.client.IDevbookImageBundle" /&gt;<br />...<br />&lt;d:CustomButton ui:field="buttonSave" text="Save" resource="{res.save}"&gt;&lt;/d:CustomButton&gt;<br /></pre>Pretty simple, isn't it? And it doesn't alter the button's behavior rather than adding the image. Some explanations might be needed as for instance you may wonder why I've overridden the <code>setText(String)</code>, <code>getText()</code> of the standard Button widget. This was needed in order to wrap the text inside a span element which I can then identify when adding the image in order to position the image before the text. This has the drawback that a definition like<br /><pre class="prettyprint">...<br />&lt;d:CustomButton ui:field="buttonSave"resource="{res.save}"&gt;Save&lt;/d:CustomButton&gt;<br /></pre>...won't work.<br /><br />Moreover this widget may be enhanced by making it more configurable like adding the image after the text etc. I've also hard-coded some styles as you see in order to make the widget easier to use. The final outcome:<br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_tF6XjsUy87k/S55p5OxLnhI/AAAAAAAACjI/r0fh3G9eeT0/s1600-h/gwtImagebuttontext.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/_tF6XjsUy87k/S55p5OxLnhI/AAAAAAAACjI/r0fh3G9eeT0/s320/gwtImagebuttontext.png" /></a></div>