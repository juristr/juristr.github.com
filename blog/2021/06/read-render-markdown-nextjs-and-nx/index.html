<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.53" />
	
	<link rel="shortcut icon" href="/assets/images/sitelogo.jpeg">
	
	<title>Read and render MD files with Next.js and Nx | juri.dev</title>
	
	<meta name="description" content="Learn how to use Next.js, Nx and Tailwind together">
	
	
	<meta name="robots" content="index, follow">

	
	<meta name="author" content="Juri Strumpflohner">
	<link rel="me" href="https://profiles.google.com/104904743888756261987" />
	<link rel="publisher" href='https://plus.google.com/104904743888756261987' />
	<meta property="twitter:account_id" content="14407063" />


	
	<meta name="google-site-verification" content="0_vyoIaeMG1kXR0h-48gy3OaGl8xoiSJsFDxxCTIBMs" />
	<meta name="google-site-verification" content="AvmssSjl_nchNXIqBW8Agb_UjGqvvLP7HXSxBZ9d0cg" />

	
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@juristr" />
	<meta name="twitter:creator" content="@juristr" />
	<meta name="twitter:title" content="Read and render MD files with Next.js and Nx" />
	
	<meta name="twitter:description" content="Learn how to use Next.js, Nx and Tailwind together" />
	

	
	<meta name="twitter:image:src" content="https://juristr.com/blog/assets/imgs/nextjs-nx-series/bg-nextjs-md-rendering.jpg" />
	

	
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Read and render MD files with Next.js and Nx" />
	
	<meta property="og:description" content="Learn how to use Next.js, Nx and Tailwind together" />
	
	
	<meta property="og:image" content="https://juristr.com/blog/assets/imgs/nextjs-nx-series/bg-nextjs-md-rendering.jpg" />
	
	<meta property="og:url" content="https://juristr.com/blog/2021/06/read-render-markdown-nextjs-and-nx" />
	<meta property="og:site_name" content="juristr.com" />

	
	<link rel="alternate" type="application/rss+xml" title="Juri Strumpflohner" href="//feeds.feedburner.com/juristrumpflohner">
	

	
	<link href="/css/bootstrap.min.css" rel="stylesheet">

	
	
	<link href='//fonts.googleapis.com/css?family=Righteous|Roboto:400,700,900|Source+Code+Pro|Lora:400,700,400italic|Material+Icons'
	 rel='stylesheet' type='text/css'>
	

	

	
	
	
	<link rel="stylesheet" href="/scss/main.min.css" integrity="" media="screen">

	

	

	
	
	<link rel="stylesheet" href="/scss/article.min.css" integrity="" media="screen">
	

	
	
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
<header class="navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container">

        
        <div class="row justify-content-center align-items-center brandrow">

            <div class="col-lg-4 col-md-4 col-xs-12 d-none d-md-block hidden-xs customarea">
                <img src="/assets/images/gde.svg" style="height:23px">
                <a href="https://developers.google.com/community/experts/directory/profile/profile-juri_strumpflohner" style="
                    padding-left: 5px;
                    font-size: 15pt;
                ">GDE
                    for Web Tech</a>
                

            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-center logoarea">
                <a class="navbar-brand" href="https://juristr.com/">
                    
                    <span style="font-family:Righteous;">juri.dev</span>
                    
                </a>
                
            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-right d-none d-md-block">
                <a href="https://twitter.com/juristr" class="twitter-follow-button" data-show-count="true">Follow me!</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>

        </div>
        

        <div class="navarea">

            <nav class="navbar navbar-toggleable-sm">
                
                <div id="bs4navbar" class="navbar-collapse">
                    
                    <ul id="menu-top-menu" class="navbar-nav col-md-12 justify-content-center">
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/blog">Blog</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/categories">Collections</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/newsletter">Newsletter</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="https://github.com/juristr/ama">AMA</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/about">About Me</a>
                        </li>
                        
                    </ul>

                    
                </div>
            </nav>

        </div>

    </div>

</header>

    <div class="site-content">



<div class="container page-container">
    <div class="row">
        
        <div class="col-md-2 pl-0"><div class="share">
    <p>
        Share
    </p>
    <ul>
        <li>
            <a target="_blank" href="https://twitter.com/home?status=Check out this post by @juristr https%3a%2f%2fjuristr.com%2fblog%2f2021%2f06%2fread-render-markdown-nextjs-and-nx%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path>
                </svg>
            </a>
        </li>
        <li>
            <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjuristr.com%2fblog%2f2021%2f06%2fread-render-markdown-nextjs-and-nx%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path>
                </svg>
            </a>
        </li>
    </ul>
    
</div></div>
        
        <div class="col-md-9 col-md-offset-2 col-xs-12">
            <div class="mainheading">

                
                
                
                
                <div class="row post-top-meta">
                    
                    <div class="col-md-2">
                        <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                    </div>
                    <div class="col-md-10">
                        <a class="link-dark" href="/about/">Juri Strumpflohner</a><a href="https://twitter.com/@juristr"
                            class="btn follow">Follow</a>
                        <span class="author-description">Juri is a full stack developer and tech lead with a special passion for the web and frontend development. He creates online videos for <a href="https://egghead.io/instructors/juri-strumpflohner">Egghead.io</a>, writes articles on his blog and for tech magazines, speaks at conferences and holds training workshops. Juri is also a recognized Google Developer Expert in Web Technologies</span>
                        
                    </div>
                    
                </div>
                
                
                
                

                <h1 class="posttitle">Read and render MD files with Next.js and Nx</h1>
                
                <h2 class="article-subtitle">Learn how to use Next.js, Nx and Tailwind together</h2>
                
                <p>
                    <span class="post-date">
                        <time class="post-date">
                            Jun 23, 2021
                        </time></span>
                    <span class="dot"></span>
                    <span class="post-read">12 min read</span>
                </p>
            </div>

            
            
            

            
            <a href="https://egghead.io/courses/productive-git-for-developers?af=fj2vsx" class="external-link" data-client="eggheadio" data-uid="url">
                <img src="/assets/images/banners/egghead-banner-productive-git.png" style="width:100%" />
            </a>
            

            
            <div class="article-post">
                <div class="article-intro">
    In the previous article, we looked into how to setup <a href="/blog/2021/06/setup-tailwind-nextjs-and-nx">Tailwind with Next.js and Nx workspace</a>.
In this article we are going to learn how to use Next.js to read files from the file system, to parse the Markdown, and to render it to HTML. In particular, we&rsquo;re going to see how Nx helps us generate code and organize the features into Nx libraries. Rendering Markdown files is an essential part of creating a JAMStack application. For our blog platform, we are going to write articles in Markdown, which should then be parsed and rendered properly.
</div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9669473064376287" data-ad-slot="2496274486"
    data-ad-format="auto"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><strong>Building a blog with Next.js and Nx Series</strong><br />
This article is part of a series around building a blog with Nx, Next.js, Tailwind, Storybook and Cypress.</p>

<ul>
<li><a href="/blog/2021/06/create-nextjs-webapp-nx">Create a Next.js web app with Nx</a></li>
<li><a href="/blog/2021/06/setup-tailwind-nextjs-and-nx/">Setup Next.js to use Tailwind with Nx</a></li>
<li><strong>Read and render Markdown files with Next.js and Nx</strong></li>
<li><a href="/blog/2021/07/component-hydration-nextjs-nx">Component hydration with MDX in Next.js and Nx</a></li>
<li><a href="/blog/2021/07/fast-refresh-mdx-files-next-and-nx/">Hot Reload MDX changes in Next.js with Nx</a></li>
<li><a href="/blog/2021/07/nextjs-workspace-generator-blog-draft/">Using Nx Workspace generators to scaffold new blog posts</a></li>
<li>Use Storybook with Next.js, Tailwind and Nx to develop components in isolation  <em>(soon)</em></li>
<li>Use Cypress with Next.js and Nx to battle test your React Components <em>(soon)</em></li>
<li>Publishing a Next.js site to Vercel with Nx <em>(soon)</em></li>
</ul>

<p><em>Check back later, <a href="https://twitter.com/juristr">follow me on Twitter</a> or <a href="/newsletter">subscribe to the Newsletter</a> to get updates about upcoming articles</em></p>

<hr />
<div class="article-toc">
    <strong>Table of contents</strong>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#install-dependencies">Install dependencies</a></li>
<li><a href="#create-the-markdown-file">Create the markdown file</a></li>
<li><a href="#next-js-fundamentals-data-handling">Next.js Fundamentals - Data Handling</a>
<ul>
<li><a href="#getstaticprops">GetStaticProps</a></li>
<li><a href="#getstaticpaths">GetStaticPaths</a></li>
<li><a href="#getserversideprops">GetServerSideProps</a></li>
</ul></li>
<li><a href="#generate-our-next-js-page-to-render-articles">Generate our Next.js page to render Articles</a></li>
<li><a href="#retrieve-a-list-of-paths">Retrieve a list of paths</a></li>
<li><a href="#read-and-parse-the-markdown-file-content">Read and Parse the Markdown file content</a>
<ul>
<li><a href="#generate-a-nx-library-to-handle-markdown-operations">Generate a Nx library to handle Markdown operations</a></li>
<li><a href="#read-and-parse-markdown">Read and parse Markdown</a></li>
<li><a href="#convert-markdown-to-html">Convert Markdown to HTML</a></li>
</ul></li>
<li><a href="#render-the-article">Render the article</a></li>
<li><a href="#visualize-our-nx-workspace">Visualize our Nx Workspace</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul></li>
</ul>
</nav>
</div>
<hr />

<h2 id="install-dependencies">Install dependencies</h2>

<p>First of all, let&rsquo;s install a couple of libraries which we&rsquo;re gonna need as we develop this new functionality.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ yarn add gray-matter add remark remark-html</code></pre></div>
<h2 id="create-the-markdown-file">Create the markdown file</h2>

<p>We want to have all of our article markdown files in a single <code>_articles</code> directory at the root of our workspace. For now, let&rsquo;s keep things simple and place a single markdown demo file there: <code>_articles/dynamic-routing.md</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">---<span class="err">
</span><span class="err"></span>title: &#39;Dynamic Routing and Static Generation&#39;<span class="err">
</span><span class="err"></span>excerpt: &#39;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Praesent elementum facilisis leo vel fringilla est ullamcorper eget. At imperdiet dui accumsan sit amet nulla facilities morbi tempus.&#39;<span class="err">
</span><span class="err"></span>date: &#39;2020-03-16T05:35:07.322Z&#39;<span class="err">
</span><span class="err"></span>author:<span class="err">
</span><span class="err"></span>  name: JJ Kasper<span class="err">
</span><span class="err"></span>---<span class="err">
</span><span class="err">
</span><span class="err"></span>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Praesent elementum facilisis leo vel fringilla est ullamcorper eget. At imperdiet dui accumsan sit amet nulla facilities morbi tempus. Praesent elementum facilisis leo vel fringilla. Congue mauris rhoncus aenean vel. Egestas sed tempus urna et pharetra pharetra massa massa ultricies.<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="gu">##</span> Lorem Ipsum
<span class="err">
</span><span class="err"></span>Tristique senectus et netus et malesuada fames ac turpis. Ridiculous mus mauris vitae ultricies leo integer malesuada nunc vel. In mollis nunc sed id semper. Egestas tellus rutrum tellus pellentesque. Phasellus vestibulum lorem sed risus ultricies tristique nulla. Quis blandit turpis cursus in hac habitasse platea dictumst quisque. Eros donec ac odio tempor orci dapibus ultrices. Aliquam sem et tortor consequat id porta nibh. Adipiscing elit duis tristique sollicitudin nibh sit amet commodo nulla. Diam vulputate ut pharetra sit amet. Ut tellus elementum sagittis vitae et leo. Arcu non odio euismod lacinia at quis risus sed vulputate.</code></pre></div>
<h2 id="next-js-fundamentals-data-handling">Next.js Fundamentals - Data Handling</h2>

<p>Before we dive straight into the loading, parsing and rendering of our Markdown file, let’s first go through some of the fundamentals that we need to understand first.</p>

<p>There are three functions that play a major role when it comes to data fetching in Next.js:</p>

<ul>
<li><code>getStaticProps</code> - (Static Generation) to fetch data at build time</li>
<li><code>getStaticPaths</code> - (Static Generation) to specify dynamic routes that get prerendered at build-time.</li>
<li><code>getServerSideProps</code> - (Server-side Rendering) to fetch data on each request</li>
</ul>

<p>To get started, for our blog platform we mostly need the first two. You can read all the details on the <a href="https://nextjs.org/docs/basic-features/data-fetching">official Next.js docs</a>. But let’s quickly go over the main parts.</p>

<h3 id="getstaticprops">GetStaticProps</h3>

<p>If our Next.js page has an <code>async</code> export named <code>getStaticProps</code>, that page is pre-rendered with the information returned by that function.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getStaticProps</span>: <span class="kt">GetStaticProps</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// your logic  
</span><span class="c1"></span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">props</span><span class="o">:</span> <span class="p">{}</span>
  <span class="p">}</span>
<span class="p">});</span></code></pre></div>
<p>The context object is well defined and has a couple of useful properties. The most important one in our case is the <code>params</code> property. It is the one that contains the route parameters when rendering dynamic routes. All the data is passed from the <code>getStaticPaths</code> function which we&rsquo;ll see next.</p>

<p>There are other properties that are being passed to the <code>getStaticProps</code> function. Read all about it <a href="https://nextjs.org/docs/basic-features/data-fetching#getstaticprops-static-generation">on the docs</a>.</p>

<h3 id="getstaticpaths">GetStaticPaths</h3>

<p>Whenever we have <a href="https://nextjs.org/docs/routing/dynamic-routes">a dynamic Next.js route</a>, we need to get the path of the route to find the corresponding markdown file. If we don&rsquo;t implement it, we get the following error:</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/error-static-paths.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/error-static-paths.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<p>The <code>getStaticPaths</code> needs to return a list of paths that need to be rendered to HTML at build time.</p>

<p>Say we have a file <code>pages/articles/[slug].tsx</code> and we invoke the URL <code>/articles/dynamic-routes</code>.</p>

<p>We have our Markdown articles in the <code>_articles</code> directory. Say we have a file <code>dynamic-routing.mdx</code> and <code>nextjs-update.mdx</code>. To target a given article, our URL will be <code>/articles/&lt;filename&gt;</code>. As such, the <code>getStaticPaths</code> should return all these so-called &ldquo;slug&rdquo; entries in the following form:</p>

<pre><code>[
  { &quot;params&quot;: { &quot;slug&quot;: &quot;dynamic-routing&quot; } },
  { &quot;params&quot;: { &quot;slug&quot;: &quot;nextjs-update&quot; } }
]
</code></pre>

<p>We&rsquo;re going to explore the detailed implementation in a minute.</p>

<h3 id="getserversideprops">GetServerSideProps</h3>

<p>Use this function if you want to dynamically render pages for each request. The props returned from this function will directly get passed to the React component. Obviously using this function means you need to deploy your Next.js app on an environment that supports running a Node server. You cannot use this if you plan to deploy your site statically to some CDN.</p>

<h2 id="generate-our-next-js-page-to-render-articles">Generate our Next.js page to render Articles</h2>

<p>The first step to rendering our Markdown articles is to create a new Next.js page that does the rendering. If you already followed one of the <a href="/blog/2021/06/create-nextjs-webapp-nx/">previous article of this series</a> you should already have a <code>apps/site/pages/articles/[slug].tsx</code> file.</p>

<p>Alternatively, you can generate it now. Instead of manually creating the file, use Nx to generate it. The goal is to generate a file <code>apps/site/pages/articles/[slug].tsx</code>. <code>[slug]</code> in particular, because that is the dynamic part.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="nx">npx</span> <span class="nx">nx</span> <span class="nx">generate</span> <span class="kd">@nrwl</span><span class="err">/next:page --name=[slug] --project=site --directory=articles</span></code></pre></div>
<p>If you are not the console type of person, you can use <a href="https://marketplace.visualstudio.com/items?itemName=nrwl.angular-console">Nx Console</a> for VSCode to generate the Next.js page.</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/generate-nextjs-page.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/generate-nextjs-page.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<p>Select <code>@nrwl/next - page</code> as the generator from the command menu.</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/generate-nextjs-page-details.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/generate-nextjs-page-details.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<p>When you&rsquo;re ready to generate, click the &ldquo;Run&rdquo; button.</p>

<p>Let&rsquo;s adjust the generated CSS module file from <code>[slug].module.css</code> into <code>articles.module.css</code> and adjust the import on the <code>[slug].tsx</code></p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// articles/[slug].tsx
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">styles</span> <span class="nx">from</span> <span class="s1">&#39;./articles.module.css&#39;</span><span class="p">;</span>

<span class="p">...</span></code></pre></div>
<h2 id="retrieve-a-list-of-paths">Retrieve a list of paths</h2>

<p>As we&rsquo;ve learned in the previous section about the Next.js Data Handling basics, we need to implement the <code>getStaticPaths</code> function for our dynamic <code>articles/[slug].tsx</code> route.</p>

<p>The user should be able to enter <code>/article/&lt;some-title&gt;</code> where for simplicity, <code>some-title</code> corresponds to the name of our file.</p>

<blockquote>
<p>Note, you might want to have some <code>url</code> property in your article <a href="https://assemble.io/docs/YAML-front-matter.html">frontmatter</a> to guard yourself against breaking existing links if you rename your file.</p>
</blockquote>

<p>Here&rsquo;s the implementation:</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// apps/site/pages/articles/[slug].tsx
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">&#39;fs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="p">...</span>
<span class="kr">interface</span> <span class="nx">ArticleProps</span> <span class="kr">extends</span> <span class="nx">ParsedUrlQuery</span> <span class="p">{</span>
  <span class="nx">slug</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">const</span> <span class="nx">POSTS_PATH</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">cwd</span><span class="p">(),</span> <span class="s1">&#39;_articles&#39;</span><span class="p">);</span>

<span class="p">...</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getStaticPaths</span>: <span class="kt">GetStaticPaths</span><span class="o">&lt;</span><span class="nx">ArticleProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">paths</span> <span class="o">=</span> <span class="nx">fs</span>
    <span class="p">.</span><span class="nx">readdirSync</span><span class="p">(</span><span class="nx">POSTS_PATH</span><span class="p">)</span>
    <span class="c1">// Remove file extensions for page paths
</span><span class="c1"></span>    <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">path</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">path</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\.mdx?$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
    <span class="c1">// Map the path into the static paths object required by Next.js
</span><span class="c1"></span>    <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">slug</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span> <span class="nx">params</span><span class="o">:</span> <span class="p">{</span> <span class="nx">slug</span> <span class="p">}</span> <span class="p">}));</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">paths</span><span class="p">,</span>
    <span class="nx">fallback</span>: <span class="kt">false</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">};</span></code></pre></div>
<h2 id="read-and-parse-the-markdown-file-content">Read and Parse the Markdown file content</h2>

<p>Now that we have the list of paths provided by <code>getStaticPaths</code>, we retrieve the actual content in the <code>getStaticProps</code> function.</p>

<p>We need to:</p>

<ul>
<li>Read the content of the markdown file from the file system</li>
<li>Parse the Markdown and according frontmatter</li>
<li>Convert the Markdown content into HTML</li>
<li>Pass the rendered HTML and frontmatter data to the React component</li>
</ul>

<h3 id="generate-a-nx-library-to-handle-markdown-operations">Generate a Nx library to handle Markdown operations</h3>

<p>We wouldn&rsquo;t want to have all logic of reading, parsing and rendering markdown within our <code>getStaticProps</code> function. In Nx the recommendation is to move most of the logic into your <code>libs</code> . This makes your functionality more reusable and helps define a clearer API from the get go, compared when you&rsquo;re just placing things in a simple folder.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="nx">npx</span> <span class="nx">nx</span> <span class="nx">generate</span> <span class="kd">@nrwl</span><span class="err">/workspace:lib --name=markdown</span></code></pre></div>
<p>We use the simple Nx workspace library which comes with just TypeScript support and does not have any framework specific setup. We could also use <code>@nrwl/node</code> and generate a Node library that already comes with the Node types and more. But it is pretty quick to adjust the Nx workspace library <code>tsconfig.lib.json</code> to add <code>node</code> to the <code>types</code> array as well as adding <code>allowSyntheticDefaultImports</code> (read more on the <a href="https://www.typescriptlang.org/tsconfig#allowSyntheticDefaultImports">TS docs</a>).</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="err">//</span> <span class="err">libs/markdown/src/tsconfig.lib.json</span>
<span class="p">{</span>
  <span class="nt">&#34;extends&#34;</span><span class="p">:</span> <span class="s2">&#34;./tsconfig.json&#34;</span><span class="p">,</span>
  <span class="nt">&#34;compilerOptions&#34;</span><span class="p">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;allowSyntheticDefaultImports&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&#34;types&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;node&#34;</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="err">...</span>
<span class="p">}</span></code></pre></div>
<h3 id="read-and-parse-markdown">Read and parse Markdown</h3>

<p>In our new <code>markdown</code> lib, let&rsquo;s create a new <code>markdown.ts</code> file. First we create a new function <code>getParsedFileContentBySlug</code> which given a <code>slug</code> (e.g. <code>dynamic-routing</code>) reads the <code>_articles/dynamic-routing.mdx</code> file.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/lib/markdown.ts
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">&#39;fs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="p">...</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getParsedFileContentBySlug</span> <span class="o">=</span> <span class="p">(</span>
  <span class="nx">slug</span>: <span class="kt">string</span><span class="p">,</span>
  <span class="nx">postsPath</span>: <span class="kt">string</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="kr">const</span> <span class="nx">postFilePath</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">postsPath</span><span class="p">,</span> <span class="sb">`</span><span class="si">${</span><span class="nx">slug</span><span class="si">}</span><span class="sb">.mdx`</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">fileContents</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">postFilePath</span><span class="p">);</span>

  <span class="p">...</span>
<span class="p">};</span></code></pre></div>
<p>As you can see, we get the <code>slug</code> and article MD files location <code>postsPath</code> as params and simply use Node.js API to read from the file system.</p>

<p>Next we use <code>gray-matter</code> to parse the Markdown content into the frontmatter and actual content piece.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/lib/markdown.ts
</span><span class="c1"></span>
<span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">&#39;fs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">matter</span> <span class="nx">from</span> <span class="s1">&#39;gray-matter&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getParsedFileContentBySlug</span> <span class="o">=</span> <span class="p">(</span>
  <span class="nx">slug</span>: <span class="kt">string</span><span class="p">,</span>
  <span class="nx">postsPath</span>: <span class="kt">string</span>
<span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="kr">const</span> <span class="nx">postFilePath</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">postsPath</span><span class="p">,</span> <span class="sb">`</span><span class="si">${</span><span class="nx">slug</span><span class="si">}</span><span class="sb">.mdx`</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">fileContents</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">postFilePath</span><span class="p">);</span>

  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">content</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">matter</span><span class="p">(</span><span class="nx">fileContents</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">frontMatter</span>: <span class="kt">data</span><span class="p">,</span>
    <span class="nx">content</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">};</span></code></pre></div>
<p>Given we&rsquo;re using TypeScript, let&rsquo;s enhance our signatures with some TypeScript interfaces. For that, create a new file <code>markdown-document.ts</code> :</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/lib/types.ts
</span><span class="c1"></span><span class="kr">export</span> <span class="kr">interface</span> <span class="nx">FrontMatter</span> <span class="p">{</span>
  <span class="p">[</span><span class="nx">prop</span>: <span class="kt">string</span><span class="p">]</span><span class="o">:</span> <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">MarkdownDocument</span> <span class="p">{</span>
  <span class="nx">frontMatter</span>: <span class="kt">FrontMatter</span><span class="p">;</span>
  <span class="nx">content</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>And consequently add it as return type:</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/lib/markdown.ts
</span><span class="c1"></span><span class="p">...</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">MarkdownDocument</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./types&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getParsedFileContentBySlug</span> <span class="o">=</span> <span class="p">(</span>
  <span class="nx">slug</span>: <span class="kt">string</span><span class="p">,</span>
  <span class="nx">postsPath</span>: <span class="kt">string</span>
<span class="p">)</span><span class="o">:</span> <span class="nx">MarkdownDocument</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="p">...</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">frontMatter</span>: <span class="kt">data</span><span class="p">,</span>
    <span class="nx">content</span><span class="p">,</span>
  <span class="p">};</span>
<span class="p">};</span></code></pre></div>
<p>We can now call <code>getParsedFileContentBySlug</code> from the <code>getStaticProps</code> function in our <code>articles/[slug].tsx</code> file of the Next.js app. First we need to make sure to <strong>export the functions and required types</strong> from our Nx library.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/index.ts
</span><span class="c1"></span><span class="kr">export</span> <span class="o">*</span> <span class="nx">from</span> <span class="s1">&#39;./lib/types&#39;</span><span class="p">;</span>
<span class="kr">export</span> <span class="o">*</span> <span class="nx">from</span> <span class="s1">&#39;./lib/markdown&#39;</span><span class="p">;</span></code></pre></div>
<blockquote>
<p><strong>Note:</strong> The <code>index.ts</code> of every Nx library is like a public API for the other workspace projects. <strong>Only</strong> what gets exported via this public API can be shared and used by others. The fact that you have to think about what to expose and what not, implicitly leads to a better architectural design (compared to for instance just a folder structure).</p>
</blockquote>

<p>Then, in our <code>[slug].tsx</code> invoke the function from the <code>getStaticProps</code>. We can simply import them from <code>@juridev/markdown</code> as if it was an external NPM package. This is thanks to the TypeScript paths mappings, which Nx automatically added to the <code>tsconfig.base.json</code> when we generated the library.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// apps/site/pages/articles/[slug].tsx
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span>
  <span class="nx">getParsedFileContentBySlug</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@juridev/markdown&#39;</span>

<span class="p">...</span>


<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getStaticProps</span>: <span class="kt">GetStaticProps</span><span class="o">&lt;</span><span class="nx">ArticleProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">({</span>
  <span class="nx">params</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">params</span>: <span class="kt">ArticleProps</span><span class="p">;</span>
<span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// read markdown file into content and frontmatter
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">articleMarkdownContent</span> <span class="o">=</span> <span class="nx">getParsedFileContentBySlug</span><span class="p">(</span>
    <span class="nx">params</span><span class="p">.</span><span class="nx">slug</span><span class="p">,</span>
    <span class="nx">POSTS_PATH</span>
  <span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">slug</span>: <span class="kt">params.slug</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getStaticPaths</span>: <span class="kt">GetStaticPaths</span><span class="o">&lt;</span><span class="nx">ArticleProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{...}</span></code></pre></div>
<p>With that we have the Markdown content loaded. We now need to convert the Markdown into HTML.</p>

<blockquote>
<p>Note, how we can directly call Node APIs (e.g. from within our  <code>getParsedFileContentBySlug</code> ) and directly invoke such functions from the <code>getStaticProps</code> and <code>getStaticPaths</code> functions. This is because both, <code>getStaticProps</code> and <code>getStaticPaths</code> run at build-time, thus in a Node environment.</p>
</blockquote>

<h3 id="convert-markdown-to-html">Convert Markdown to HTML</h3>

<p>Again, we make use of our <code>markdown</code> lib in <code>libs/markdown</code> of our Nx workspace.</p>

<p>We accomplish the HTML rendering itself with <code>remark</code>. The logic for that is private to our <code>markdown</code> lib meaning we don&rsquo;t export it in our <code>libs/markdown/src/index.ts</code>. This is simply because it is an implementation detail how and with which library we render our Markdown.</p>

<p>Let&rsquo;s create a new <code>markdownToHtml.ts</code> file in the <code>libs/markdown</code> lib of our workspace.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">//libs/markdown/src/lib/markdownToHtml.ts
</span><span class="c1"></span><span class="kr">import</span> <span class="nx">remark</span> <span class="nx">from</span> <span class="s1">&#39;remark&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">html</span> <span class="nx">from</span> <span class="s1">&#39;remark-html&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="nx">async</span> <span class="kd">function</span> <span class="nx">markdownToHtml</span><span class="p">(</span><span class="nx">markdown</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">remark</span><span class="p">().</span><span class="nx">use</span><span class="p">(</span><span class="nx">html</span><span class="p">).</span><span class="nx">process</span><span class="p">(</span><span class="nx">markdown</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">result</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
<span class="p">}</span></code></pre></div>
<p>Let&rsquo;s call the public API function <code>renderMarkdown</code> and define it in the <code>markdown.ts</code> file of our lib. We can call the <code>markdownToHtml</code> function directly from there.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/lib/markdown.ts
</span><span class="c1"></span><span class="p">...</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">renderMarkdown</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">(</span>
  <span class="nx">markdownContent</span>: <span class="kt">string</span>
<span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">await</span> <span class="nx">markdownToHtml</span><span class="p">(</span><span class="nx">markdownContent</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">};</span></code></pre></div>
<p>Finally, we can wrap everything up and call our <code>renderMarkdown</code> from the <code>[slug].tsx</code> as well. Here&rsquo;s the full code:</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// apps/site/pages/articles/[slug].tsx
</span><span class="c1"></span><span class="kr">import</span> <span class="p">{</span>
  <span class="nx">getParsedFileContentBySlug</span><span class="p">,</span>
  <span class="nx">MarkdownRenderingResult</span><span class="p">,</span>
  <span class="nx">renderMarkdown</span><span class="p">,</span>
<span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@juridev/markdown&#39;</span>
<span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">&#39;fs&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">GetStaticPaths</span><span class="p">,</span> <span class="nx">GetStaticProps</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;next&#39;</span><span class="p">;</span>

<span class="p">...</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getStaticProps</span>: <span class="kt">GetStaticProps</span><span class="o">&lt;</span><span class="nx">MarkdownRenderingResult</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">({</span>
  <span class="nx">params</span><span class="p">,</span>
<span class="p">}</span><span class="o">:</span> <span class="p">{</span>
  <span class="nx">params</span>: <span class="kt">ArticleProps</span><span class="p">;</span>
<span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// read markdown file into content and frontmatter
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">articleMarkdownContent</span> <span class="o">=</span> <span class="nx">getParsedFileContentBySlug</span><span class="p">(</span>
    <span class="nx">params</span><span class="p">.</span><span class="nx">slug</span><span class="p">,</span>
    <span class="nx">POSTS_PATH</span>
  <span class="p">);</span>

  <span class="c1">// generate HTML
</span><span class="c1"></span>  <span class="kr">const</span> <span class="nx">renderedHTML</span> <span class="o">=</span> <span class="nx">await</span> <span class="nx">renderMarkdown</span><span class="p">(</span><span class="nx">articleMarkdownContent</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">props</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">frontMatter</span>: <span class="kt">articleMarkdownContent.frontMatter</span><span class="p">,</span>
      <span class="nx">content</span>: <span class="kt">renderedHTML</span>
    <span class="p">},</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">getStaticPaths</span>: <span class="kt">GetStaticPaths</span><span class="o">&lt;</span><span class="nx">ArticleProps</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{...}</span></code></pre></div>
<p>You might have noticed the <code>MarkdownRenderingResult</code> type. We define it in our <code>markdown</code> lib&rsquo;s <code>type.ts</code> file as well:</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// libs/markdown/src/lib/types.ts
</span><span class="c1"></span>
<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">FrontMatter</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

<span class="kr">export</span> <span class="kr">interface</span> <span class="nx">MarkdownRenderingResult</span> <span class="p">{</span>
  <span class="nx">frontMatter</span>: <span class="kt">FrontMatter</span><span class="p">;</span>
  <span class="nx">html</span>: <span class="kt">string</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>Next section rendering the content with our React component.</p>

<h2 id="render-the-article">Render the article</h2>

<p>We have all data prepared now and can basically just take care of the rendering. I&rsquo;m not going to create a fully styled rendering of an article (I&rsquo;ll leave that to you ;)).</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// pages/articles/[slug].tsx
</span><span class="c1"></span>
<span class="p">...</span>

<span class="kr">export</span> <span class="kd">function</span> <span class="nx">Article</span><span class="p">({</span> <span class="nx">frontMatter</span><span class="p">,</span> <span class="nx">html</span> <span class="p">})</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;md:container md:mx-auto&#34;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">article</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;text-3xl font-bold hover:text-gray-700 pb-4&#34;</span><span class="o">&gt;</span>
          <span class="p">{</span><span class="nx">frontMatter</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span>
        <span class="o">&lt;</span><span class="err">/h1&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">by</span> <span class="p">{</span><span class="nx">frontMatter</span><span class="p">.</span><span class="nx">author</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="o">&lt;</span><span class="nx">hr</span> <span class="err">/&gt;</span>

        <span class="o">&lt;</span><span class="nx">main</span> <span class="nx">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{{</span> <span class="nx">__html</span>: <span class="kt">html</span> <span class="p">}}</span> <span class="err">/&gt;</span>
      <span class="o">&lt;</span><span class="err">/article&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>By navigating to <code>/articles/dynamic-routing</code> you should see something like the following:</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/rendered-markdown-page-preview.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/rendered-markdown-page-preview.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<h2 id="visualize-our-nx-workspace">Visualize our Nx Workspace</h2>

<p>Now that we have our pyarage rendered, let&rsquo;s have a look at how our Nx workspace looks from a code organization perspective. Nx has a handy feature called the &ldquo;<a href="https://nx.dev/latest/react/structure/dependency-graph">Dependency Graph</a>&rdquo;. To visualize it, run</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">npx nx dep-graph</code></pre></div>
<p>You should see the rendering of our app <code>site</code> and library <code>markdown</code>.</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/dep-graph-markdownlib.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/dep-graph-markdownlib.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<h2 id="conclusion">Conclusion</h2>

<p>We&rsquo;ve covered quite a lot in this article.</p>

<ul>
<li>Next.js Data fetching basics</li>
<li>How to read and parse markdown files</li>
<li>How to extract our logic for the reading, parsing and rendering of our Markdown into a dedicated Nx library</li>
<li>How to reference our Nx <code>markdown</code> lib from our Next.js page</li>
<li>How you can visualize your Nx workspace with the <code>dep-graph</code> feature</li>
</ul>

<p><strong>GitHub repository</strong><br />
All the sources for this article can be found in this GitHub repository&rsquo;s branch: <a href="https://github.com/juristr/blog-series-nextjs-nx/tree/03-render-md-nextjs">https://github.com/juristr/blog-series-nextjs-nx/tree/03-render-md-nextjs</a></p>

				<hr />

				Questions? Thoughts? Hit me up <a href="https://twitter.com/juristr" target="_blank">on Twitter</a>
            </div>

            
            <div class="after-post-tags">
                <ul class="tags">
                    
                    <li>
                        <a href="/tags/nextjs">nextjs</a>
                    </li>
                    
                    <li>
                        <a href="/tags/TailwindCSS">TailwindCSS</a>
                    </li>
                    
                    <li>
                        <a href="/tags/reactjs">reactjs</a>
                    </li>
                    
                    <li>
                        <a href="/tags/markdown">markdown</a>
                    </li>
                    
                </ul>
            </div>
            

            <a href="https://egghead.io/instructors/juri-strumpflohner" class="external-link" data-client="eggheadio"
                data-uid="egghead-instructor-page">
                <img src="/blog/assets/imgs/egghead-banner-learn-with-me.png" style="width:100%" />
            </a>

            
            
            
        </div>
        
    </div>
</div>

<div class="hideshare"></div>



<div class="related-container">
    <div class="container">
        <div class="row listrecent listrelated">
            
            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2021/06/setup-tailwind-nextjs-and-nx">Setup Next.js to use Tailwind with Nx</a>
        </h2>
        <h4 class="card-text">
            Learn how to use Next.js, Nx and Tailwind together
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Jun 15, 2021</span><span class="dot"></span><span
                                    class="post-read">8 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            <div class="svgicon" style="width: 140px">
    

    

    

    

    

    

    

    

    

</div><div class="svgicon clean_code"></div>
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2021/06/create-nextjs-webapp-nx">Create a Next.js web app with Nx</a>
        </h2>
        <h4 class="card-text">
            Learn about the powerful combination of Next.js and Nx
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Jun 9, 2021</span><span class="dot"></span><span
                                    class="post-read">11 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            <div class="svgicon" style="width: 140px">
    

    

    

    

    

    

    

    

    

</div><div class="svgicon clean_code"></div>
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2020/12/scale-react-dev-with-nx">Scale React Development with Nx</a>
        </h2>
        <h4 class="card-text">
            Learn about scaling React development with Nx, with my free Egghead course
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Dec 11, 2020</span><span class="dot"></span><span
                                    class="post-read">5 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            <div class="svgicon" style="width: 140px">
    

    

    

    

    

    

    

    

    

</div><div class="svgicon clean_code"></div>
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            
            

        </div>
    </div>
</div>

<div class="container">
    <div id="comments" class="row justify-content-center mb-5">
        <div class="col-md-8">              
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "juristr" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>               
        </div>
    </div>
</div>



<script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">window.dojoRequire(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us4.list-manage.com","uuid":"04e83acc0ba14b18f30435204","lid":"1d83b68321","uniqueMethods":true}) })</script>
<div class="container">
    
<div class="footer">
    <p class="pull-left">
        &copy; Copyright Juri Strumpflohner - All rights reserved
    </p>
    <p class="pull-right">
        Customized Mediumish Theme, originally by <a target="_blank" href="https://www.wowthemes.net">WowThemes.net</a>
    </p>
    <div class="clearfix">
    </div>
</div>


</div>

    </div>

<script src="/js/jquery.min.js"></script>


<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>




<script type="text/javascript" src="/js/bundle.js" integrity=""></script>


<script src="/js/jquery.fluidbox.min.js"></script>
<script>
    $('a.image--zoom,.gallery>a').fluidbox();
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-416229-12', 'juristr.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>






    
    <script type="text/javascript">
        window.cookieconsent_options = {
            "message": "This website uses cookies to ensure you get the best experience on our website",
            "dismiss": "Got it!",
            "learnMore": "More info",
            "link": null,
            "theme": "dark-bottom"
        };
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js" defer></script>
    

    
    
    
    <script>
!function(t,e,a,c,x){var s='q';t[s]={publication_id:c,tags:x};
var s=e.createElement(a),r=e.getElementsByTagName(a)[0];s.async=1,s.src=
'https://insights.quiet.ly/app/analytics.min.js',r.parentNode.insertBefore(s,r)}
(window,document,'script','87bcee90-0c51-4a68-a60b-e95df730d1ca','[]');
</script>
    
 <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>

</html>
