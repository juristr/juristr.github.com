<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.53" />
	
	<link rel="shortcut icon" href="/assets/images/sitelogo.jpeg">
	
	<title>Setup Next.js to use Tailwind with Nx | juri.dev</title>
	
	<meta name="description" content="Learn how to use Next.js, Nx and Tailwind together">
	
	
	<meta name="robots" content="index, follow">

	
	<meta name="author" content="Juri Strumpflohner">
	<link rel="me" href="https://profiles.google.com/104904743888756261987" />
	<link rel="publisher" href='https://plus.google.com/104904743888756261987' />
	<meta property="twitter:account_id" content="14407063" />


	
	<meta name="google-site-verification" content="0_vyoIaeMG1kXR0h-48gy3OaGl8xoiSJsFDxxCTIBMs" />
	<meta name="google-site-verification" content="AvmssSjl_nchNXIqBW8Agb_UjGqvvLP7HXSxBZ9d0cg" />

	
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@juristr" />
	<meta name="twitter:creator" content="@juristr" />
	<meta name="twitter:title" content="Setup Next.js to use Tailwind with Nx" />
	
	<meta name="twitter:description" content="Learn how to use Next.js, Nx and Tailwind together" />
	

	
	<meta name="twitter:image:src" content="https://juristr.com/blog/assets/imgs/nextjs-nx-series/bg-tailwind-next-nx.jpg" />
	

	
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Setup Next.js to use Tailwind with Nx" />
	
	<meta property="og:description" content="Learn how to use Next.js, Nx and Tailwind together" />
	
	
	<meta property="og:image" content="https://juristr.com/blog/assets/imgs/nextjs-nx-series/bg-tailwind-next-nx.jpg" />
	
	<meta property="og:url" content="https://juristr.com/blog/2021/06/setup-tailwind-nextjs-and-nx" />
	<meta property="og:site_name" content="juristr.com" />

	
	<link rel="alternate" type="application/rss+xml" title="Juri Strumpflohner" href="//feeds.feedburner.com/juristrumpflohner">
	

	
	<link href="/css/bootstrap.min.css" rel="stylesheet">

	
	
	<link href='//fonts.googleapis.com/css?family=Righteous|Roboto:400,700,900|Source+Code+Pro|Lora:400,700,400italic|Material+Icons'
	 rel='stylesheet' type='text/css'>
	

	

	
	
	
	<link rel="stylesheet" href="/scss/main.min.css" integrity="" media="screen">

	

	

	
	
	<link rel="stylesheet" href="/scss/article.min.css" integrity="" media="screen">
	

	
	
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
<header class="navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container">

        
        <div class="row justify-content-center align-items-center brandrow">

            <div class="col-lg-4 col-md-4 col-xs-12 d-none d-md-block hidden-xs customarea">
                <img src="/assets/images/gde.svg" style="height:23px">
                <a href="https://developers.google.com/community/experts/directory/profile/profile-juri_strumpflohner" style="
                    padding-left: 5px;
                    font-size: 15pt;
                ">GDE
                    for Web Tech</a>
                

            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-center logoarea">
                <a class="navbar-brand" href="https://juristr.com/">
                    
                    <span style="font-family:Righteous;">juri.dev</span>
                    
                </a>
                
            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-right d-none d-md-block">
                <a href="https://twitter.com/juristr" class="twitter-follow-button" data-show-count="true">Follow me!</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>

        </div>
        

        <div class="navarea">

            <nav class="navbar navbar-toggleable-sm">
                
                <div id="bs4navbar" class="navbar-collapse">
                    
                    <ul id="menu-top-menu" class="navbar-nav col-md-12 justify-content-center">
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/blog">Blog</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/categories">Collections</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/newsletter">Newsletter</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="https://github.com/juristr/ama">AMA</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/about">About Me</a>
                        </li>
                        
                    </ul>

                    
                </div>
            </nav>

        </div>

    </div>

</header>

    <div class="site-content">



<div class="container page-container">
    <div class="row">
        
        <div class="col-md-2 pl-0"><div class="share">
    <p>
        Share
    </p>
    <ul>
        <li>
            <a target="_blank" href="https://twitter.com/home?status=Check out this post by @juristr https%3a%2f%2fjuristr.com%2fblog%2f2021%2f06%2fsetup-tailwind-nextjs-and-nx%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path>
                </svg>
            </a>
        </li>
        <li>
            <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjuristr.com%2fblog%2f2021%2f06%2fsetup-tailwind-nextjs-and-nx%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path>
                </svg>
            </a>
        </li>
    </ul>
    
</div></div>
        
        <div class="col-md-9 col-md-offset-2 col-xs-12">
            <div class="mainheading">

                
                
                
                
                <div class="row post-top-meta">
                    
                    <div class="col-md-2">
                        <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                    </div>
                    <div class="col-md-10">
                        <a class="link-dark" href="/about/">Juri Strumpflohner</a><a href="https://twitter.com/@juristr"
                            class="btn follow">Follow</a>
                        <span class="author-description">Juri is a full stack developer and tech lead with a special passion for the web and frontend development. He creates online videos for <a href="https://egghead.io/instructors/juri-strumpflohner">Egghead.io</a>, writes articles on his blog and for tech magazines, speaks at conferences and holds training workshops. Juri is also a recognized Google Developer Expert in Web Technologies</span>
                        
                    </div>
                    
                </div>
                
                
                
                

                <h1 class="posttitle">Setup Next.js to use Tailwind with Nx</h1>
                
                <h2 class="article-subtitle">Learn how to use Next.js, Nx and Tailwind together</h2>
                
                <p>
                    <span class="post-date">
                        <time class="post-date">
                            Jun 15, 2021
                        </time></span>
                    <span class="dot"></span>
                    <span class="post-read">8 min read</span>
                </p>
            </div>

            
            
            

            
            <a href="https://egghead.io/courses/productive-git-for-developers?af=fj2vsx" class="external-link" data-client="eggheadio" data-uid="url">
                <img src="/assets/images/banners/egghead-banner-productive-git.png" style="width:100%" />
            </a>
            

            
            <div class="article-post">
                <div class="article-intro">
    In the <a href="/blog/2021/06/create-nextjs-webapp-nx">previous article</a> we learned how to setup Next.js in an Nx workspace. In this article we carry that forward, by adding <a href="https://tailwindcss.com/">TailwindCSS</a> support to our setup.
</div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9669473064376287" data-ad-slot="2496274486"
    data-ad-format="auto"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p><strong>Building a blog with Next.js and Nx Series</strong><br />
This article is part of a series around building a blog with Nx, Next.js, Tailwind, Storybook and Cypress.</p>

<ul>
<li><a href="/blog/2021/06/create-nextjs-webapp-nx">Create a Next.js web app with Nx</a></li>
<li><strong>Setup Next.js to use Tailwind with Nx</strong></li>
<li><a href="/blog/2021/06/read-render-markdown-nextjs-and-nx">Read and render Markdown files with Next.js and Nx</a></li>
<li><a href="/blog/2021/07/component-hydration-nextjs-nx">Component hydration with MDX in Next.js and Nx</a></li>
<li><a href="/blog/2021/07/fast-refresh-mdx-files-next-and-nx/">Hot Reload MDX changes in Next.js with Nx</a></li>
<li><a href="/blog/2021/07/nextjs-workspace-generator-blog-draft/">Using Nx Workspace generators to scaffold new blog posts</a></li>
<li><a href="/blog/2021/08/nextjs-storybook-tailwind-nx/">Use Storybook with Tailwind in an Nx Workspace</a></li>
<li>Use Cypress with Next.js and Nx to battle test your React Components <em>(soon)</em></li>
<li>Publishing a Next.js site to Vercel with Nx <em>(soon)</em></li>
</ul>

<p><em>Check back later, <a href="https://twitter.com/juristr">follow me on Twitter</a> or <a href="/newsletter">subscribe to the Newsletter</a> to get updates about upcoming articles</em></p>

<hr />
<div class="article-toc">
    <strong>Table of contents</strong>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#install-and-configure-tailwind-in-an-nx-workspace">Install and configure Tailwind in an Nx workspace</a></li>
<li><a href="#include-the-tailwindcss-styles">Include the TailwindCSS styles</a></li>
<li><a href="#testing-the-integration">Testing the integration</a></li>
<li><a href="#how-do-we-handle-tailwind-config-files-in-a-monorepo">How do we handle Tailwind config files in a monorepo</a></li>
<li><a href="#tailwind-css-purging">Tailwind CSS Purging</a>
<ul>
<li><a href="#configure-css-purging">Configure CSS Purging</a></li>
<li><a href="#enabling-tailwind-jit">Enabling Tailwind JIT</a></li>
</ul></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul></li>
</ul>
</nav>
</div>
<hr />

<blockquote>
<p>It&rsquo;s important to note that you <strong>don&rsquo;t need to use a preprocessor with Tailwind</strong> â€” you typically write very little CSS on a Tailwind project anyways so using a preprocessor just isn&rsquo;t as beneficial as it would be in a project where you write a lot of custom CSS.</p>
</blockquote>

<p>The official TailwindCSS docs page already <a href="https://tailwindcss.com/docs/guides/nextjs">has a guide</a> on how to setup Tailwind with Next.js. Definitely check that out.</p>

<h2 id="install-and-configure-tailwind-in-an-nx-workspace">Install and configure Tailwind in an Nx workspace</h2>

<p>The first step is to install the necessary npm packages.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">yarn add tailwindcss@latest postcss@latest autoprefixer@latest</code></pre></div>
<p>The next step is to create the <code>tailwind.config.js</code> as well as <code>postcss.config.js</code> files. Tailwind already comes with a utility for that. <strong>Note,</strong> previously we generated our app (named <code>site</code>) into the <code>apps</code> folder of Nx. Therefore, when generating the Tailwind configuration, we need to cd into that folder.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">cd</span> apps/site
npx tailwindcss init -p </code></pre></div>
<p>That should generate both of the configuration files directly into the root of our Next.js application.</p>

<p>Make sure you adjust our <code>postcss.config.js</code> to properly point to our tailwind config file.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="c1">// apps/site/postcss.config.js
</span><span class="c1"></span><span class="k">const</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">tailwindcss</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">config</span><span class="o">:</span> <span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;tailwind.config.js&#39;</span><span class="p">),</span>
    <span class="p">},</span>
    <span class="nx">autoprefixer</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div>
<h2 id="include-the-tailwindcss-styles">Include the TailwindCSS styles</h2>

<p>There are two options for including the Tailwind CSS files:</p>

<ol>
<li>Directly import them in the global <code>_app.tsx</code> component</li>
<li>Include it in the <code>styles.css</code> css file that gets imported by the <code>_app.tsx</code> file</li>
</ol>

<p><strong>Option 1:</strong></p>

<p>Open the main Next.js page component <code>_app.tsx</code> which functions and import the TailwindCSS file instead of <code>styles.css</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">...
import <span class="s1">&#39;tailwindcss/tailwind.css&#39;</span><span class="p">;</span>

<span class="k">function</span> CustomApp<span class="o">({</span> Component, pageProps <span class="o">}</span>: AppProps<span class="o">)</span> <span class="o">{</span>
  ...
<span class="o">}</span>

<span class="nb">export</span> default CustomApp<span class="p">;</span></code></pre></div>
<p><strong>Option 2:</strong></p>

<p>Open <code>styles.css</code>, clean all the pre-generated CSS and include the TailwindCSS components there:</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">@</span><span class="k">tailwind</span> <span class="nt">base</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span> <span class="nt">components</span><span class="p">;</span>
<span class="p">@</span><span class="k">tailwind</span> <span class="nt">utilities</span><span class="p">;</span></code></pre></div>
<p><code>styles.css</code> gets imported by the <code>_app.tsx</code> and thus functions as the global CSS file for our Next.js app.</p>

<p>Finally also in the <code>_app.tsx</code>, remove the header section as we won&rsquo;t need it right now:</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="kr">import</span> <span class="p">{</span> <span class="nx">AppProps</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;next/app&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">Head</span> <span class="nx">from</span> <span class="s1">&#39;next/head&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="s1">&#39;./styles.css&#39;</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">CustomApp</span><span class="p">({</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">pageProps</span> <span class="p">}</span><span class="o">:</span> <span class="nx">AppProps</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;&gt;</span>
      <span class="o">&lt;</span><span class="nx">Head</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">Welcome</span> <span class="nx">to</span> <span class="nx">site</span><span class="o">!&lt;</span><span class="err">/title&gt;</span>
      <span class="o">&lt;</span><span class="err">/Head&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;app&#34;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">main</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">Component</span> <span class="p">{...</span><span class="nx">pageProps</span><span class="p">}</span> <span class="err">/&gt;</span>
        <span class="o">&lt;</span><span class="err">/main&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/&gt;</span>
  <span class="p">);</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">CustomApp</span><span class="p">;</span></code></pre></div>
<h2 id="testing-the-integration">Testing the integration</h2>

<p>Let&rsquo;s quickly test whether the TailwindCSS integration works by adding the following to our <code>index.tsx</code> page component.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// apps/site/pages/index.tsx
</span><span class="c1"></span><span class="kr">export</span> <span class="kd">function</span> <span class="nx">Index() {</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;bg-gray-50&#34;</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between&#34;</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h2</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl&#34;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;block&#34;</span><span class="o">&gt;</span><span class="nx">Ready</span> <span class="nx">to</span> <span class="nx">dive</span> <span class="k">in</span><span class="o">?&lt;</span><span class="err">/span&gt;</span>
          <span class="o">&lt;</span><span class="nx">span</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;block text-indigo-600&#34;</span><span class="o">&gt;</span>
            <span class="nx">Start</span> <span class="nx">your</span> <span class="nx">free</span> <span class="nx">trial</span> <span class="nx">today</span><span class="p">.</span>
          <span class="o">&lt;</span><span class="err">/span&gt;</span>
        <span class="o">&lt;</span><span class="err">/h2&gt;</span>
        <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;mt-8 flex lg:mt-0 lg:flex-shrink-0&#34;</span><span class="o">&gt;</span>
          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;inline-flex rounded-md shadow&#34;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">a</span>
              <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;#&#34;</span>
              <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700&#34;</span>
            <span class="o">&gt;</span>
              <span class="nx">Get</span> <span class="nx">started</span>
            <span class="o">&lt;</span><span class="err">/a&gt;</span>
          <span class="o">&lt;</span><span class="err">/div&gt;</span>
          <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;ml-3 inline-flex rounded-md shadow&#34;</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">a</span>
              <span class="nx">href</span><span class="o">=</span><span class="s2">&#34;#&#34;</span>
              <span class="nx">className</span><span class="o">=</span><span class="s2">&#34;inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-indigo-600 bg-white hover:bg-indigo-50&#34;</span>
            <span class="o">&gt;</span>
              <span class="nx">Learn</span> <span class="nx">more</span>
            <span class="o">&lt;</span><span class="err">/a&gt;</span>
          <span class="o">&lt;</span><span class="err">/div&gt;</span>
        <span class="o">&lt;</span><span class="err">/div&gt;</span>
      <span class="o">&lt;</span><span class="err">/div&gt;</span>
    <span class="o">&lt;</span><span class="err">/div&gt;</span>
  <span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>The result should look like this</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/tailwind-page-preview.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/tailwind-page-preview.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<h2 id="how-do-we-handle-tailwind-config-files-in-a-monorepo">How do we handle Tailwind config files in a monorepo</h2>

<p>So far we&rsquo;ve placed the Tailwind config within our app root directory (<code>apps/site</code>). That makes sense as the app probably knows the Tailwind configs to be designed properly. However, you might also want some more global, cross-app configs. Think about a company design system, where you&rsquo;ll most probably have the same font, maybe even colors etc.</p>

<p>To have a global Nx workspace-wide config we can leverage <a href="https://tailwindcss.com/docs/presets">Tailwind presets</a>. At the Nx workspace root we define a <code>tailwind-workspace-preset.js</code>.</p>

<p>Let&rsquo;s add the <a href="https://blog.tailwindcss.com/tailwindcss-typography">Tailwind Typography package</a>:</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="nx">yarn</span> <span class="nx">add</span> <span class="kd">@tailwindcss</span><span class="err">/typography</span></code></pre></div>
<p>Next, we add it to our <code>tailwind-workspace-preset.js</code></p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// tailwind-workspace-preset.js
</span><span class="c1"></span><span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">theme</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">variants</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@tailwindcss/typography&#39;</span><span class="p">)],</span>
<span class="p">};</span></code></pre></div>
<p>In order to use the Tailwind preset in our <code>apps/site</code> specific Tailwind config, we require the file and add it to the <code>presets</code> array of the config.</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="c1">// apps/site/tailwind.config.js
</span><span class="c1"></span>
<span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../tailwind-workspace-preset.js&#39;</span><span class="p">)],</span>
  <span class="p">...</span>
<span class="p">};</span></code></pre></div>
<p>Note, I&rsquo;ve seen people use something like <code>const { appRootPath } = require('@nrwl/workspace/src/utils/app-root');</code> and then concatenate it with the actual config file, which obviously also works and gets rid of the relative file import. Importing from <code>@nrwl/workspace</code> should be avoided though, and also it is a deep import of a private API that is subject to change.</p>

<p>Using a relative path should be fine here, as the app location will only rarely change.</p>

<p>Verify that your changes work by adding some paragraphs to your <code>index.tsx</code>. You can use those mentioned in the <a href="https://github.com/tailwindlabs/tailwindcss-typography#usage">Tailwind Typography repo</a>.</p>

<h2 id="tailwind-css-purging">Tailwind CSS Purging</h2>

<p>One of the main advantages of Tailwind is its CSS purging mechanism that allows reducing the final CSS bundle to only the required parts. As a result, you get a small and optimized CSS file. This happens at compile time using the PostCSS configuration.</p>

<p>Right now, if we run <code>npx nx run site:export</code>, we&rsquo;ll see that there&rsquo;s quite a large CSS file that gets exported:</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/tailwind-css-unpurged.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/tailwind-css-unpurged.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<p>This is because Tailwind during development pulls in all kinds of utility class names which you might never actually need.</p>

<h3 id="configure-css-purging">Configure CSS Purging</h3>

<p>To enable purging, open the <code>tailwind.config.js</code> for the <code>site</code> app and add the globs to the <code>purge</code> property. For our application <code>site</code> it might look as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">// apps/site/tailwind.config.js
</span><span class="c1"></span><span class="k">const</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">purge</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;pages/**/*.{js,ts,jsx,tsx}&#39;</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="p">...</span>
<span class="p">};</span></code></pre></div>
<p>One of the particularities and also advantages of Nx is that its setup incentivizes the structuring of your logic into <code>apps</code> and <code>libs</code> (more <a href="https://nx.dev/latest/react/guides/monorepo-nx-enterprise#apps-and-libs">details on the docs</a>). As a result, though, our components having Tailwind classes might not only be in the <code>apps/site/**</code> but also within libraries in the <code>libs/**</code> folder. Naively we could just add those globs as well, like <code>./libs/**/*.{js,ts,jsx,tsx}</code>. In a large workspace, this might however lead to unnecessary parsing of files since not all libs might be used by our Next app.</p>

<p>To solve this, we can dynamically calculate the glob pattern based on which <code>libs</code> our Next.js app depends on. <a href="https://nx.dev/latest/react/structure/dependency-graph">Nx has a dependency graph</a>, which can not only be used to visualize, but we can also <a href="https://juristr.com/blog/2020/09/use-nx-dep-graph-in-custom-scripts/">leverage it in our custom scripts</a>. Luckily we don&rsquo;t have to create our own script since in <strong>Nx v12.4.0</strong> we added some utility functions that allow us to easily generate glob patterns based on the apps&rsquo; dependencies.</p>

<p>Change your <code>tailwind.config.js</code> to the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">// apps/site/tailwind.config.js
</span><span class="c1"></span><span class="k">const</span> <span class="p">{</span> <span class="nx">join</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="c1">// available since Nx v 12.5
</span><span class="c1"></span><span class="k">const</span> <span class="p">{</span> <span class="nx">createGlobPatternsForDependencies</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@nrwl/next/tailwind&#39;</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">presets</span><span class="o">:</span> <span class="p">[</span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../../tailwind-workspace-preset.js&#39;</span><span class="p">)],</span>
  <span class="nx">purge</span><span class="o">:</span> <span class="p">[</span>
    <span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;pages/**/*.{js,ts,jsx,tsx}&#39;</span><span class="p">),</span>
    <span class="p">...</span><span class="nx">createGlobPatternsForDependencies</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">),</span>
  <span class="p">],</span>
  <span class="nx">darkMode</span><span class="o">:</span> <span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="c1">// or &#39;media&#39; or &#39;class&#39;
</span><span class="c1"></span>  <span class="nx">theme</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">variants</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">extend</span><span class="o">:</span> <span class="p">{},</span>
  <span class="p">},</span>
  <span class="nx">plugins</span><span class="o">:</span> <span class="p">[],</span>
<span class="p">};</span></code></pre></div>
<p>Note how we import the <code>createGlobPatternsForDependencies</code> function from <code>@nrwl/next/tailwind</code> and pass it the current directory. What the function does is simply create a list of paths of potential libs our app depends on. For example, consider we depend on a lib <code>ui</code> and <code>core</code> the resulting generated paths would look like</p>
<div class="highlight"><pre class="chroma"><code class="language-tsx" data-lang="tsx"><span class="err">/Users/yourname/juridev/libs/ui/src/**/!(*.stories|*.spec).tsx</span>
<span class="err">/Users/yourname/juridev/libs/core/src/**/!(*.stories|*.spec).tsx</span></code></pre></div>
<p><em>(The exact path obviously depends on your username, Nx workspace name and operating system)</em></p>

<p>The glob pattern can be customized by specifying the 2nd parameter of the <code>createGlobPatternsForDependencies</code> function.</p>

<p>Finally, to verify the purging works as intended, execute the build or export target on our app (<code>nx run site:build</code>). The resulting CSS file should be only a couple of KBs.</p>


<figure class="image--full">

    
        
        <a href="/blog/assets/imgs/nextjs-nx-series/tailwind-css-purged.png" class="image--zoom">
            <img src="/blog/assets/imgs/nextjs-nx-series/tailwind-css-purged.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<h3 id="enabling-tailwind-jit">Enabling Tailwind JIT</h3>

<p>Since purging only happens at build time when you create the deployable bundle, the amount of CSS to load during development might be huge, depending on which TailwindCSS classes you apply to your HTML elements. This might result in an overall slowdown of the debugging tools (e.g. Chrome Devtools).</p>

<p>To mitigate that, the Tailwind team introduced the JIT mode, which (at the time of writing this article) is an experimental feature that can be turned on by adding the <code>mode: 'jit'</code> to the Tailwind config</p>
<div class="highlight"><pre class="chroma"><code class="language-jsx" data-lang="jsx"><span class="c1">// apps/site/tailwind.config.js
</span><span class="c1"></span>
<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">mode</span><span class="o">:</span> <span class="s1">&#39;jit&#39;</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">};</span></code></pre></div>
<p>Tailwind&rsquo;s JIT compiler uses its own file watching system, so make sure to set the required environment variables like</p>

<ul>
<li><code>TAILWIND_MODE</code> to <code>watch</code> to get continuous watching as you have the dev server running and change the Tailwind classes. Set it to <code>build</code> for a one-off compilation</li>
<li><code>NODE_ENV</code> should be set to <code>production</code> when doing the final build, s.t. the JIT compiler doesn&rsquo;t watch files, but just does a one-off compilation.</li>
</ul>

<p>Note that Nx already sets the NODE_ENV to production when you build or export your Next.js app (e.g. using <code>nx serve site</code> ).</p>

<p>You can read all the details about JIT mode on the <a href="https://tailwindcss.com/docs/just-in-time-mode">Tailwind docs</a>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>In this article we learned about</p>

<ul>
<li>how to install TailwindCSS into an Nx workspace</li>
<li>how to configure PostCSS and Tailwind</li>
<li>how to organize Tailwind config files in a monorepo</li>
<li>how setup CSS purging with Tailwind and how Nx helps to generate globs for dependent projects</li>
</ul>

<p><strong>GitHub repository</strong><br />
All the sources for this article can be found in this GitHub repository&rsquo;s branch: <a href="https://github.com/juristr/blog-series-nextjs-nx/tree/02-setup-tailwind">https://github.com/juristr/blog-series-nextjs-nx/tree/02-setup-tailwind</a></p>

				<hr />

				Questions? Thoughts? Hit me up <a href="https://twitter.com/juristr" target="_blank">on Twitter</a>
            </div>

            
            <div class="after-post-tags">
                <ul class="tags">
                    
                    <li>
                        <a href="/tags/Next">Next</a>
                    </li>
                    
                    <li>
                        <a href="/tags/TailwindCSS">TailwindCSS</a>
                    </li>
                    
                    <li>
                        <a href="/tags/React">React</a>
                    </li>
                    
                    <li>
                        <a href="/tags/markdown">markdown</a>
                    </li>
                    
                </ul>
            </div>
            

            <a href="https://egghead.io/instructors/juri-strumpflohner" class="external-link" data-client="eggheadio"
                data-uid="egghead-instructor-page">
                <img src="/blog/assets/imgs/egghead-banner-learn-with-me.png" style="width:100%" />
            </a>

            
            
            
        </div>
        
    </div>
</div>

<div class="hideshare"></div>



<div class="related-container">
    <div class="container">
        <div class="row listrecent listrelated">
            
            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2021/06/create-nextjs-webapp-nx">Create a Next.js web app with Nx</a>
        </h2>
        <h4 class="card-text">
            Learn about the powerful combination of Next.js and Nx
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Jun 9, 2021</span><span class="dot"></span><span
                                    class="post-read">11 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/next.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2020/12/scale-react-dev-with-nx">Scale React Development with Nx</a>
        </h2>
        <h4 class="card-text">
            Learn about scaling React development with Nx, with my free Egghead course
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Dec 11, 2020</span><span class="dot"></span><span
                                    class="post-read">5 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/react.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2020/11/get-started-with-nx">I&#39;m new to Nx. Where do I get started?</a>
        </h2>
        <h4 class="card-text">
            Best resources to get up to speed with Nx
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Nov 11, 2020</span><span class="dot"></span><span
                                    class="post-read">2 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/nx.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            
            

        </div>
    </div>
</div>

<div class="container">
    <div id="comments" class="row justify-content-center mb-5">
        <div class="col-md-8">              
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "juristr" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>               
        </div>
    </div>
</div>



<script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">window.dojoRequire(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us4.list-manage.com","uuid":"04e83acc0ba14b18f30435204","lid":"1d83b68321","uniqueMethods":true}) })</script>
<div class="container">
    
<div class="footer">
    <p class="pull-left">
        &copy; Copyright Juri Strumpflohner - All rights reserved
    </p>
    <p class="pull-right">
        Customized Mediumish Theme, originally by <a target="_blank" href="https://www.wowthemes.net">WowThemes.net</a>
    </p>
    <div class="clearfix">
    </div>
</div>


</div>

    </div>

<script src="/js/jquery.min.js"></script>


<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>




<script type="text/javascript" src="/js/bundle.js" integrity=""></script>


<script src="/js/jquery.fluidbox.min.js"></script>
<script>
    $('a.image--zoom,.gallery>a').fluidbox();
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-416229-12', 'juristr.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>






    
    <script type="text/javascript">
        window.cookieconsent_options = {
            "message": "This website uses cookies to ensure you get the best experience on our website",
            "dismiss": "Got it!",
            "learnMore": "More info",
            "link": null,
            "theme": "dark-bottom"
        };
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js" defer></script>
    

    
    
    
    <script>
!function(t,e,a,c,x){var s='q';t[s]={publication_id:c,tags:x};
var s=e.createElement(a),r=e.getElementsByTagName(a)[0];s.async=1,s.src=
'https://insights.quiet.ly/app/analytics.min.js',r.parentNode.insertBefore(s,r)}
(window,document,'script','87bcee90-0c51-4a68-a60b-e95df730d1ca','[]');
</script>
    
 <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>

</html>
