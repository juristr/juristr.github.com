<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.53" />
	
	<link rel="shortcut icon" href="/assets/images/sitelogo.jpeg">
	
	<title>Dynamically Load CSS with the Angular CLI | juri.dev</title>
	
	<meta name="description" content="You probably don&#39;t know, but you can specify how the CLI loads your CSS">
	
	
	<meta name="robots" content="index, follow">

	
	<meta name="author" content="Juri Strumpflohner">
	<link rel="me" href="https://profiles.google.com/104904743888756261987" />
	<link rel="publisher" href='https://plus.google.com/104904743888756261987' />
	<meta property="twitter:account_id" content="14407063" />


	
	<meta name="google-site-verification" content="0_vyoIaeMG1kXR0h-48gy3OaGl8xoiSJsFDxxCTIBMs" />
	<meta name="google-site-verification" content="AvmssSjl_nchNXIqBW8Agb_UjGqvvLP7HXSxBZ9d0cg" />

	
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@juristr" />
	<meta name="twitter:creator" content="@juristr" />
	<meta name="twitter:title" content="Dynamically Load CSS with the Angular CLI" />
	
	<meta name="twitter:description" content="You probably don&#39;t know, but you can specify how the CLI loads your CSS" />
	

	
	<meta name="twitter:image:src" content="https://juristr.com/blog/assets/imgs/lazy-load-css.png" />
	

	
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Dynamically Load CSS with the Angular CLI" />
	
	<meta property="og:description" content="You probably don&#39;t know, but you can specify how the CLI loads your CSS" />
	
	
	<meta property="og:image" content="https://juristr.com/blog/assets/imgs/lazy-load-css.png" />
	
	<meta property="og:url" content="https://juristr.com/blog/2019/08/dynamically-load-css-angular-cli" />
	<meta property="og:site_name" content="juristr.com" />

	
	<link rel="alternate" type="application/rss+xml" title="Juri Strumpflohner" href="//feeds.feedburner.com/juristrumpflohner">
	

	
	<link href="/css/bootstrap.min.css" rel="stylesheet">

	
	
	<link href='//fonts.googleapis.com/css?family=Righteous|Roboto:400,700,900|Source+Code+Pro|Lora:400,700,400italic|Material+Icons'
	 rel='stylesheet' type='text/css'>
	

	

	
	
	
	<link rel="stylesheet" href="/scss/main.min.css" integrity="" media="screen">

	

	

	
	
	<link rel="stylesheet" href="/scss/article.min.css" integrity="" media="screen">
	

	
	
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
<header class="navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container">

        
        <div class="row justify-content-center align-items-center brandrow">

            <div class="col-lg-4 col-md-4 col-xs-12 d-none d-md-block hidden-xs customarea">
                <img src="/assets/images/gde.svg" style="height:23px">
                <a href="https://developers.google.com/community/experts/directory/profile/profile-juri_strumpflohner" style="
                    padding-left: 5px;
                    font-size: 15pt;
                ">GDE
                    for Web Tech</a>
                

            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-center logoarea">
                <a class="navbar-brand" href="https://juristr.com/">
                    
                    <span style="font-family:Righteous;">juri.dev</span>
                    
                </a>
                
            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-right d-none d-md-block">
                <a href="https://twitter.com/juristr" class="twitter-follow-button" data-show-count="true">Follow me!</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>

        </div>
        

        <div class="navarea">

            <nav class="navbar navbar-toggleable-sm">
                
                <div id="bs4navbar" class="navbar-collapse">
                    
                    <ul id="menu-top-menu" class="navbar-nav col-md-12 justify-content-center">
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/blog">Blog</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/categories">Collections</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/newsletter">Newsletter</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="https://github.com/juristr/ama">AMA</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/about">About Me</a>
                        </li>
                        
                    </ul>

                    
                </div>
            </nav>

        </div>

    </div>

</header>

    <div class="site-content">



<div class="container page-container">
    <div class="row">
        
        <div class="col-md-2 pl-0"><div class="share">
    <p>
        Share
    </p>
    <ul>
        <li>
            <a target="_blank" href="https://twitter.com/home?status=Check out this post by @juristr https%3a%2f%2fjuristr.com%2fblog%2f2019%2f08%2fdynamically-load-css-angular-cli%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path>
                </svg>
            </a>
        </li>
        <li>
            <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjuristr.com%2fblog%2f2019%2f08%2fdynamically-load-css-angular-cli%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path>
                </svg>
            </a>
        </li>
    </ul>
    
</div></div>
        
        <div class="col-md-9 col-md-offset-2 col-xs-12">
            <div class="mainheading">

                
                
                
                
                <div class="row post-top-meta">
                    
                    <div class="col-md-2">
                        <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                    </div>
                    <div class="col-md-10">
                        <a class="link-dark" href="/about/">Juri Strumpflohner</a><a href="https://twitter.com/@juristr"
                            class="btn follow">Follow</a>
                        <span class="author-description">Juri is a full stack developer and tech lead with a special passion for the web and frontend development. He creates online videos for <a href="https://egghead.io/instructors/juri-strumpflohner">Egghead.io</a>, writes articles on his blog and for tech magazines, speaks at conferences and holds training workshops. Juri is also a recognized Google Developer Expert in Web Technologies</span>
                        
                    </div>
                    
                </div>
                
                
                
                

                <h1 class="posttitle">Dynamically Load CSS with the Angular CLI</h1>
                
                <h2 class="article-subtitle">You probably don&#39;t know, but you can specify how the CLI loads your CSS</h2>
                
                <p>
                    <span class="post-date">
                        <time class="post-date">
                            Aug 22, 2019
                        </time></span>
                    <span class="dot"></span>
                    <span class="post-read">4 min read</span>
                </p>
            </div>

            
            
            

            
            <a href="https://egghead.io/courses/productive-git-for-developers?af=fj2vsx" class="external-link" data-client="eggheadio" data-uid="url">
                <img src="/assets/images/banners/egghead-banner-productive-git.png" style="width:100%" />
            </a>
            

            
            <div class="article-post">
                <div class="article-intro">
    I’ve written about <a href="/blog/2019/04/state-lazy-loading-components-angular/">lazy loading</a> in the past, as well as how to <a href="/blog/2016/01/learning-ng2-dynamic-styles">handle various styling issues in Angular</a>. This time we’ll explore how to customize the Angular CLI s.t. we can lazy load CSS files on the fly.
</div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9669473064376287" data-ad-slot="2496274486"
    data-ad-format="auto"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<p>Normally if you generate an Angular app, you’ll get a <code>styles.css</code> or <code>styles.scss</code> file (based on whether you choose to use some CSS precompiler or not). This style gets directly compiled and injected into your <code>index.html</code>. In fact, if you open the <code>angular.json</code> file, you’ll find a configuration like</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="s2">&#34;dyncss&#34;</span><span class="o">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="err">&#34;build&#34;:</span> <span class="err">{</span>
        <span class="err">...</span>
        <span class="n">options</span><span class="p">:</span> <span class="err">{</span>
          <span class="o">...</span>
          <span class="s2">&#34;styles&#34;</span><span class="o">:</span> <span class="p">[</span>
              <span class="s2">&#34;src/styles.scss&#34;</span><span class="p">,</span>
          <span class="p">],</span>
        <span class="p">}</span>
    <span class="err">}</span><span class="o">,</span>
    <span class="o">...</span>
<span class="err">}</span><span class="o">,</span></code></pre></div>
<p>and finally in your <code>index.html</code> something like</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
  ...
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;styles.11660fe9b6fe10ffd079.css&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  ...
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div>
<p>Now what if you have different styles you compile and you want to lazy load them at runtime?</p>

<h2 id="tl-dr-watch-the-lesson-on-egghead">TL;DR - Watch the lesson on Egghead</h2>

<div class="egghead-video-embed">
    <iframe src="https://egghead.io/lessons/egghead-lazy-load-css-at-runtime-with-the-angular-cli/embed?af=fj2vsx" width="100%" height="500px" loading="lazy"> </iframe>
    <a href="https://egghead.io/lessons/egghead-lazy-load-css-at-runtime-with-the-angular-cli?af=fj2vsx" class="external-link" data-client="eggheadio" data-uid="lessons/egghead-lazy-load-css-at-runtime-with-the-angular-cli">View
        on
        Egghead.io</a>
</div>

<h2 id="create-various-style-entry-points">Create various style entry points</h2>

<p>First of all, we need to create the various entry point CSS files of course. You can just create further <code>scss</code>  files at the level where the <code>styles.scss</code> is in your project. For example:</p>

<ul>
<li><code>client-a-styles.scss</code></li>
<li><code>client-b-styles.scss</code></li>
</ul>

<p>You can see each of these as a fully independent <code>styles.scss</code> but for different clients, different project themes, or whatever you&rsquo;re trying to achieve. Obviously you may want to reuse parts among these via according Sass imports.</p>

<h2 id="configuring-the-cli">Configuring the CLI</h2>

<p>Next we need to configure the Angular CLI to take our newly defined Sass files as well (btw, this totally also works with plain CSS of course).</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;dyncss&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="err">...</span>
        <span class="err">options:</span> <span class="err">{</span>
          <span class="err">...</span>
          <span class="nt">&#34;styles&#34;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&#34;src/styles.scss&#34;</span><span class="p">,</span>
            <span class="s2">&#34;src/client-a-styles.scss&#34;</span><span class="p">,</span>
            <span class="s2">&#34;src/client-b-styles.scss&#34;</span>
          <span class="p">],</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="err">,</span>
    <span class="err">...</span>
<span class="err">},</span></code></pre></div>
<p>However, there&rsquo;s a problem with this approach. Configuring the styles like this, all of them would be included and the last would win over the others. What do I mean by that. Well, most likely you might be using these for theming purposes, so <code>client-a-styles.scss</code> might include something like</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">app-title</span> <span class="p">{</span>
  <span class="k">color</span><span class="p">:</span> <span class="kc">blue</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<p>..while <code>client-b-styles.scss</code> includes</p>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">app-title</span> <span class="p">{</span>
  <span class="k">color</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span></code></pre></div>
<p><code>client-b-style.scss</code> is included <strong>after</strong> <code>client-a-style.scss</code>, so it would override all previously defined CSS rules.</p>

<p>Hence, we need to <strong>tell the Angular CLI to NOT include these styles</strong> as we are going to load them on the fly. This can be done by including them as follows:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;dyncss&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="err">...</span>
        <span class="err">options:</span> <span class="err">{</span>
          <span class="err">...</span>
          <span class="nt">&#34;styles&#34;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&#34;src/styles.scss&#34;</span><span class="p">,</span>
            <span class="p">{</span>
              <span class="nt">&#34;input&#34;</span><span class="p">:</span> <span class="s2">&#34;src/client-a-styles.scss&#34;</span><span class="p">,</span>
              <span class="nt">&#34;bundleName&#34;</span><span class="p">:</span> <span class="s2">&#34;client-a&#34;</span><span class="p">,</span>
              <span class="nt">&#34;inject&#34;</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&#34;input&#34;</span><span class="p">:</span> <span class="s2">&#34;src/client-b-styles.scss&#34;</span><span class="p">,</span>
              <span class="nt">&#34;bundleName&#34;</span><span class="p">:</span> <span class="s2">&#34;client-b&#34;</span><span class="p">,</span>
              <span class="nt">&#34;inject&#34;</span><span class="p">:</span> <span class="kc">false</span>
            <span class="p">}</span>
          <span class="p">],</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="err">,</span>
    <span class="err">...</span>
<span class="err">},</span></code></pre></div>
<blockquote>
<p>Hint: you might have seen <code>lazy</code> being used when configuring styles in the <code>angular.json</code>. It has been deprecated in favor of <code>inject</code> however, as the latter better expresses the actual meaning.</p>
</blockquote>

<p>To see the effect, compile the app with <code>ng build --prod</code>.</p>


<figure class="image--medium">

    
        
        <a href="/blog/assets/imgs/lazy-css-bundles.png" class="image--zoom">
            <img src="/blog/assets/imgs/lazy-css-bundles.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<h2 id="lazy-load-at-runtime">Lazy load at runtime</h2>

<p>Now that we have separate CSS files being produced by the Angular CLI, we can think about how to lazy load them. In your app you should encapsulate the behavior in a dedicated service. For the purpose of showcasing it here, I simply create a <code>loadStyle(...)</code> function in my <code>AppComponent</code> and use the <code>Document</code> to add the link to the <code>&lt;head&gt;</code> section.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="p">{</span> <span class="nx">DOCUMENT</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/common&#39;</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">export</span> <span class="k">class</span> <span class="nx">AppComponent</span> <span class="p">{</span>
  <span class="nx">title</span> <span class="o">=</span> <span class="s1">&#39;dyncss&#39;</span><span class="p">;</span>

  <span class="nx">constructor</span><span class="p">(</span><span class="err">@</span><span class="nx">Inject</span><span class="p">(</span><span class="nx">DOCUMENT</span><span class="p">)</span> <span class="kr">private</span> <span class="nb">document</span><span class="o">:</span> <span class="nx">Document</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">loadStyle</span><span class="p">(</span><span class="nx">styleName</span><span class="o">:</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">const</span> <span class="nx">head</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

    <span class="kd">let</span> <span class="nx">themeLink</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span>
      <span class="s1">&#39;client-theme&#39;</span>
    <span class="p">)</span> <span class="nx">as</span> <span class="nx">HTMLLinkElement</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">themeLink</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">themeLink</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="nx">styleName</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">const</span> <span class="nx">style</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;link&#39;</span><span class="p">);</span>
      <span class="nx">style</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="s1">&#39;client-theme&#39;</span><span class="p">;</span>
      <span class="nx">style</span><span class="p">.</span><span class="nx">rel</span> <span class="o">=</span> <span class="s1">&#39;stylesheet&#39;</span><span class="p">;</span>
      <span class="nx">style</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">styleName</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>

      <span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This would allow us to load the theme at runtime, based on the user login, some configuration variable or whatever, by simply invoking <code>loadStyle('client-a.css')</code>.</p>

<h3 id="hint-lazy-load-in-development">Hint: Lazy load in development</h3>

<p>If you try to invoke <code>loadStyle('client-a.css')</code> in development (via <code>ng serve</code>) you&rsquo;ll most likely get the following error:</p>


<figure class="image--medium">

    
        
        <a href="/blog/assets/imgs/lazy-css-in-dev-err.png" class="image--zoom">
            <img src="/blog/assets/imgs/lazy-css-in-dev-err.png" loading="lazy" class="lazyload"/>
        </a>
    
    <figcaption></figcaption>
</figure>



<p>The reason is that the CSS is served via a JavaScript file (<code>style.js</code>) as it is faster during development. To disable this behavior, you can add the <code>&quot;extractCss&quot;: true</code> to the project configuration in the <code>angular.json</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-json" data-lang="json"><span class="s2">&#34;dyncss&#34;</span><span class="err">:</span> <span class="p">{</span>
    <span class="err">...</span>
    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="p">{</span>
        <span class="err">...</span>
        <span class="err">options:</span> <span class="err">{</span>
          <span class="err">...</span>
          <span class="nt">&#34;extractCss&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="nt">&#34;styles&#34;</span><span class="p">:</span> <span class="p">[</span>
            <span class="err">...</span>
          <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="err">,</span>
    <span class="err">...</span>
<span class="err">},</span></code></pre></div>
<h2 id="alternative-use-case-during-deployment">Alternative use case: During deployment</h2>

<p>Alternatively you can &ldquo;inject&rdquo; the stylesheet during deployment into your <code>index.html</code> via some deployment script (i.e. with Ansible). The script can post-process the <code>index.html</code> during the deployment phase and add the correct stylesheet into the head section.</p>

<h2 id="conclusion">Conclusion</h2>

<p>So in this article you learned</p>

<ul>
<li>how to configure the Angular CLI to <em>not inject the styles</em> into the HTML file</li>
<li>how to lazy load the styles at runtime</li>
</ul>

<p>Obviously the example is very simplified for the purpose of learning this approach. In a real world example you could have a much more elaborate and sophisticated mechanism for handling themes in your application.</p>

				<hr />

				Questions? Thoughts? Hit me up <a href="https://twitter.com/juristr" target="_blank">on Twitter</a>
            </div>

            
            <div class="after-post-tags">
                <ul class="tags">
                    
                    <li>
                        <a href="/tags/angular">angular</a>
                    </li>
                    
                    <li>
                        <a href="/tags/tooling">tooling</a>
                    </li>
                    
                </ul>
            </div>
            

            <a href="https://egghead.io/instructors/juri-strumpflohner" class="external-link" data-client="eggheadio"
                data-uid="egghead-instructor-page">
                <img src="/blog/assets/imgs/egghead-banner-learn-with-me.png" style="width:100%" />
            </a>

            
            
            
        </div>
        
    </div>
</div>

<div class="hideshare"></div>



<div class="related-container">
    <div class="container">
        <div class="row listrecent listrelated">
            
            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2019/08/thank-you-angular-cli-team">It’s time to say thank you to the Angular CLI Team!</a>
        </h2>
        <h4 class="card-text">
            Sometimes it&#39;s necessary to hold on and simply say thank you
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Aug 13, 2019</span><span class="dot"></span><span
                                    class="post-read">10 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/angular.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2019/04/setup-for-angular-dev">Setup your Workstation for JavaScript Development</a>
        </h2>
        <h4 class="card-text">
            Learn about the required tools to get started with proper frontend dev
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Apr 26, 2019</span><span class="dot"></span><span
                                    class="post-read">4 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            <div class="svgicon" style="width: 140px">
    

    

    

    

    

    

    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 mr-4 icon-cog"><path class="primary" d="M6.8 3.45c.87-.52 1.82-.92 2.83-1.17a2.5 2.5 0 0 0 4.74 0c1.01.25 1.96.65 2.82 1.17a2.5 2.5 0 0 0 3.36 3.36c.52.86.92 1.8 1.17 2.82a2.5 2.5 0 0 0 0 4.74c-.25 1.01-.65 1.96-1.17 2.82a2.5 2.5 0 0 0-3.36 3.36c-.86.52-1.8.92-2.82 1.17a2.5 2.5 0 0 0-4.74 0c-1.01-.25-1.96-.65-2.82-1.17a2.5 2.5 0 0 0-3.36-3.36 9.94 9.94 0 0 1-1.17-2.82 2.5 2.5 0 0 0 0-4.74c.25-1.01.65-1.96 1.17-2.82a2.5 2.5 0 0 0 3.36-3.36zM12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"></path><circle cx="12" cy="12" r="2" class="secondary"></circle></svg>
    

    

    

</div><div class="svgicon clean_code"></div>
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2019/06/angular-v8">Update to Angular Version 8 now!</a>
        </h2>
        <h4 class="card-text">
            What&#39;s new in Angular v8, how to update and what to watch out for
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Jun 3, 2019</span><span class="dot"></span><span
                                    class="post-read">11 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/angular.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            
            

        </div>
    </div>
</div>

<div class="container">
    <div id="comments" class="row justify-content-center mb-5">
        <div class="col-md-8">              
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "juristr" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>               
        </div>
    </div>
</div>



<script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">window.dojoRequire(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us4.list-manage.com","uuid":"04e83acc0ba14b18f30435204","lid":"1d83b68321","uniqueMethods":true}) })</script>
<div class="container">
    
<div class="footer">
    <p class="pull-left">
        &copy; Copyright Juri Strumpflohner - All rights reserved
    </p>
    <p class="pull-right">
        Customized Mediumish Theme, originally by <a target="_blank" href="https://www.wowthemes.net">WowThemes.net</a>
    </p>
    <div class="clearfix">
    </div>
</div>


</div>

    </div>

<script src="/js/jquery.min.js"></script>


<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>




<script type="text/javascript" src="/js/bundle.js" integrity=""></script>


<script src="/js/jquery.fluidbox.min.js"></script>
<script>
    $('a.image--zoom,.gallery>a').fluidbox();
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-416229-12', 'juristr.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>






    
    <script type="text/javascript">
        window.cookieconsent_options = {
            "message": "This website uses cookies to ensure you get the best experience on our website",
            "dismiss": "Got it!",
            "learnMore": "More info",
            "link": null,
            "theme": "dark-bottom"
        };
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js" defer></script>
    

    
    
    
    <script>
!function(t,e,a,c,x){var s='q';t[s]={publication_id:c,tags:x};
var s=e.createElement(a),r=e.getElementsByTagName(a)[0];s.async=1,s.src=
'https://insights.quiet.ly/app/analytics.min.js',r.parentNode.insertBefore(s,r)}
(window,document,'script','87bcee90-0c51-4a68-a60b-e95df730d1ca','[]');
</script>
    
 <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>

</html>
