<!DOCTYPE html>
<html lang="en-us"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="generator" content="Hugo 0.53" />
	
	<link rel="shortcut icon" href="/assets/images/sitelogo.jpeg">
	
	<title>Lazy Loading with Angular Elements and ngx-lazy-el | juri.dev</title>
	
	<meta name="description" content="Learn how Angular Elements and ngx-lazy-el can help with lazy loading">
	
	
	<meta name="robots" content="index, follow">

	
	<meta name="author" content="Juri Strumpflohner">
	<link rel="me" href="https://profiles.google.com/104904743888756261987" />
	<link rel="publisher" href='https://plus.google.com/104904743888756261987' />
	<meta property="twitter:account_id" content="14407063" />


	
	<meta name="google-site-verification" content="0_vyoIaeMG1kXR0h-48gy3OaGl8xoiSJsFDxxCTIBMs" />
	<meta name="google-site-verification" content="AvmssSjl_nchNXIqBW8Agb_UjGqvvLP7HXSxBZ9d0cg" />

	
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="@juristr" />
	<meta name="twitter:creator" content="@juristr" />
	<meta name="twitter:title" content="Lazy Loading with Angular Elements and ngx-lazy-el" />
	
	<meta name="twitter:description" content="Learn how Angular Elements and ngx-lazy-el can help with lazy loading" />
	

	
	<meta name="twitter:image:src" content="https://juristr.com/blog/assets/imgs/lazyloading-ngx-lazy-el.jpg" />
	

	
	<meta property="og:type" content="article" />
	<meta property="og:title" content="Lazy Loading with Angular Elements and ngx-lazy-el" />
	
	<meta property="og:description" content="Learn how Angular Elements and ngx-lazy-el can help with lazy loading" />
	
	
	<meta property="og:image" content="https://juristr.com/blog/assets/imgs/lazyloading-ngx-lazy-el.jpg" />
	
	<meta property="og:url" content="https://juristr.com/blog/2019/11/lazy-loading-angular-ngx-lazy-el" />
	<meta property="og:site_name" content="juristr.com" />

	

	
	<link rel="alternate" type="application/rss+xml" title="Juri Strumpflohner" href="//feeds.feedburner.com/juristrumpflohner">
	

	
	<link href="/css/bootstrap.min.css" rel="stylesheet">

	
	
	<link href='//fonts.googleapis.com/css?family=Righteous|Roboto:400,700,900|Source+Code+Pro|Lora:400,700,400italic|Material+Icons'
	 rel='stylesheet' type='text/css'>
	

	

	
	
	
	<link rel="stylesheet" href="/scss/main.min.css" integrity="" media="screen">

	

	

	
	
	<link rel="stylesheet" href="/scss/article.min.css" integrity="" media="screen">
	

	
	
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
</head>
<body>
<header class="navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container">

        
        <div class="row justify-content-center align-items-center brandrow">

            <div class="col-lg-4 col-md-4 col-xs-12 d-none d-md-block hidden-xs customarea">
                <img src="/assets/images/gde.svg" style="height:23px">
                <a href="https://developers.google.com/community/experts/directory/profile/profile-juri_strumpflohner" style="
                    padding-left: 5px;
                    font-size: 15pt;
                ">GDE
                    for Web Tech</a>
                

            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-center logoarea">
                <a class="navbar-brand" href="https://juristr.com/">
                    
                    <span style="font-family:Righteous;">juri.dev</span>
                    
                </a>
                
            </div>

            <div class="col-lg-4 col-md-4  col-xs-12 text-right d-none d-md-block">
                <a href="https://twitter.com/juristr" class="twitter-follow-button" data-show-count="true">Follow me!</a>
                <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
            </div>

        </div>
        

        <div class="navarea">

            <nav class="navbar navbar-toggleable-sm">
                
                <div id="bs4navbar" class="navbar-collapse">
                    
                    <ul id="menu-top-menu" class="navbar-nav col-md-12 justify-content-center">
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/blog">Blog</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/categories">Collections</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/newsletter">Newsletter</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="https://github.com/juristr/ama">AMA</a>
                        </li>
                        
                        <li class="menu-item ">
                            <a class="nav-link" href="/about">About Me</a>
                        </li>
                        
                    </ul>

                    
                </div>
            </nav>

        </div>

    </div>

</header>

    <div class="site-content">



<div class="container page-container">
    <div class="row">
        
        <div class="col-md-2 pl-0"><div class="share">
    <p>
        Share
    </p>
    <ul>
        <li>
            <a target="_blank" href="https://twitter.com/home?status=Check out this post by @juristr https%3a%2f%2fjuristr.com%2fblog%2f2019%2f11%2flazy-loading-angular-ngx-lazy-el%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"></path>
                </svg>
            </a>
        </li>
        <li>
            <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjuristr.com%2fblog%2f2019%2f11%2flazy-loading-angular-ngx-lazy-el%2f">
                <svg class="svgIcon-use" width="29" height="29" viewbox="0 0 29 29">
                    <path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"></path>
                </svg>
            </a>
        </li>
    </ul>
    
</div></div>
        
        <div class="col-md-9 col-md-offset-2 col-xs-12">
            <div class="mainheading">

                
                
                
                
                <div class="row post-top-meta">
                    
                    <div class="col-md-2">
                        <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                    </div>
                    <div class="col-md-10">
                        <a class="link-dark" href="/about/">Juri Strumpflohner</a><a href="https://twitter.com/@juristr"
                            class="btn follow">Follow</a>
                        <span class="author-description">Juri is a full stack developer and tech lead with a special passion for the web and frontend development. He creates online videos for <a href="https://egghead.io/instructors/juri-strumpflohner">Egghead.io</a>, writes articles on his blog and for tech magazines, speaks at conferences and holds training workshops. Juri is also a recognized Google Developer Expert in Web Technologies</span>
                        
                    </div>
                    
                </div>
                
                
                
                

                <h1 class="posttitle">Lazy Loading with Angular Elements and ngx-lazy-el</h1>
                
                <h2 class="article-subtitle">Learn how Angular Elements and ngx-lazy-el can help with lazy loading</h2>
                
                <p>
                    <span class="post-date">
                        <time class="post-date">
                            Nov 6, 2019
                        </time></span>
                    <span class="dot"></span>
                    <span class="post-read">7 min read</span>
                </p>
            </div>

            
            
            

            
            <a href="https://egghead.io/courses/productive-git-for-developers?af=fj2vsx" class="external-link" data-client="eggheadio" data-uid="url">
                <img src="/assets/images/banners/egghead-banner-productive-git.png" style="width:100%" />
            </a>
            

            
            <div class="article-post">
                

<div class="article-intro">
    Modern web apps often suffer of bad startup time. This frustrates your users. Even worse (especially for public facing apps), it might even result in being penalized on the Google search index. In this article we’re going into the details of lazy loading with Angular, in particular how to lazy load non-routed components with the help of Angular Elements.
</div>

<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9669473064376287" data-ad-slot="2496274486"
    data-ad-format="auto"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<hr />
<div class="article-toc">
    <strong>Table of contents</strong>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#why-lazy-loading">Why Lazy Loading</a></li>
<li><a href="#tl-dr">TL;DR</a></li>
<li><a href="#lazy-loading-in-angular">Lazy Loading in Angular</a></li>
<li><a href="#angular-elements-in-a-nutshell">Angular Elements in a Nutshell</a></li>
<li><a href="#how-do-angular-elements-help-with-lazy-loading">How do Angular Elements help with Lazy Loading?</a></li>
<li><a href="#lazy-loading-with-ngx-lazy-el">Lazy loading with ngx-lazy-el</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul></li>
</ul>
</nav>
</div>
<hr />

<h2 id="why-lazy-loading">Why Lazy Loading</h2>

<p>The main issue with modern JavaScript heavy web applications is, well, they are heavy. What often happens is you enter the url in the browser, and the webapp opens with a nice loading indicator. The main reason is the cost of JavaScript. Addy Osmani <a href="[https://v8.dev/blog/cost-of-javascript-2019](https://v8.dev/blog/cost-of-javascript-2019)">wrote about it</a>.</p>

<p>Loading indicators, as fancy as they might get, should really be avoided after all. To <strong>reduce the startup time</strong>, we need to make sure to keep our initial bundle size (the JS file required to load the app) as small as possible. In Angular we have a couple of different options:</p>

<ul>
<li><strong>Differential Loading -</strong> starting with the Angular CLI v8, there is built-in support for differential loading. The CLI basically creates two different production bundles for your app. One for legacy browsers, compiled in ES5 and containing a bunch of polyfills and one in ES2015 (as of now) for the evergreen browsers (Chrome, Firefox,&hellip;) that doesn’t contain the additional overhead of polyfills etc. That can considerably reduce the size of shipped JavaScript for modern browsers.</li>
<li><strong>Performance budgets -</strong> another new feature in the Angular CLI v8 are performance budgets. Performance budgets are a way for you to specify a threshold that should not be exceeded. If you combine this with your CI build, you can get notified immediately by having your build break whenever the configured performance budget is exceeded. Check out <a href="[https://juristr.com/blog/2019/08/ngperf-setting-performance-budgets/](/blog/2019/08/ngperf-setting-performance-budgets/)">my article on how to configure performance budgets with the Angular CLI</a></li>
<li><strong>Lazy Loading -</strong> Ultimately however, we need to apply lazy loading strategies, that is, to only the minimum necessary JavaScript for the app to boot. Then, only later when the user starts to interact with the app, we download further JS on the fly.</li>
</ul>

<h2 id="tl-dr">TL;DR</h2>


<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="//www.youtube.com/embed/UhJuVN5KIFk" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>


<p><strong>Source code:</strong> <a href="https://github.com/juristr/ngx-lazy-el-demo">https://github.com/juristr/ngx-lazy-el-demo</a></p>

<h2 id="lazy-loading-in-angular">Lazy Loading in Angular</h2>

<p>The main way of lazy loading in Angular right now (v8), is via the router. In your route configuration, rather than passing a direct component reference, we can use a dynamic import statement (starting from Angular v8) that points to the module we want to lazy load:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
  <span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;about&#39;</span><span class="p">,</span>
  <span class="nx">loadChildren</span><span class="o">:</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">&#39;./about/about.module&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">m</span> <span class="p">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">AboutModule</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Here are some of my past articles on lazy loading. Check them out 😃</p>

<div class="article-link card">
    <div class="row">
        <div class="col-2 share-link">
            <a href="/blog/2019/10/lazyload-module-ivy-viewengine" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 mr-4 icon-external-window">
                    <path class="primary" d="M12 8a1 1 0 0 1-1 1H5v10h10v-6a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2h6a1 1 0 0 1 1 1z"></path>
                    <path class="secondary" d="M19 6.41L8.7 16.71a1 1 0 1 1-1.4-1.42L17.58 5H14a1 1 0 0 1 0-2h6a1 1 0 0 1 1 1v6a1 1 0 0 1-2 0V6.41z"></path>
                </svg>
            </a>
        </div>
        <div class="col-10">
            <div class="title"><a href="/blog/2019/10/lazyload-module-ivy-viewengine" target="_blank">Manually Lazy Load an Angular Module with ViewEngine and Ivy</a></div>
            <div class="description"></div>
            <div class="link">
                /blog/2019/10/lazyload-module-ivy-viewengine
            </div>
        </div>
    </div>
</div>

<div class="article-link card">
    <div class="row">
        <div class="col-2 share-link">
            <a href="/blog/2019/04/state-lazy-loading-components-angular/" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 mr-4 icon-external-window">
                    <path class="primary" d="M12 8a1 1 0 0 1-1 1H5v10h10v-6a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2h6a1 1 0 0 1 1 1z"></path>
                    <path class="secondary" d="M19 6.41L8.7 16.71a1 1 0 1 1-1.4-1.42L17.58 5H14a1 1 0 0 1 0-2h6a1 1 0 0 1 1 1v6a1 1 0 0 1-2 0V6.41z"></path>
                </svg>
            </a>
        </div>
        <div class="col-10">
            <div class="title"><a href="/blog/2019/04/state-lazy-loading-components-angular/" target="_blank">Lazy load Angular Components</a></div>
            <div class="description"></div>
            <div class="link">
                /blog/2019/04/state-lazy-loading-components-angular/
            </div>
        </div>
    </div>
</div>

<h2 id="angular-elements-in-a-nutshell">Angular Elements in a Nutshell</h2>

<p><strong>First of all, what are Angular Elements?</strong> The modern frameworks such as Angular, React, Vue etc all pretty much agree on the concept of component based design. Angular pioneered this idea somehow with AngularJS v1.x in that it allowed you to extend the existing HTML with <strong>new, custom defined HTML tags</strong>. The issue? Those were obviously not portable. And so over time a dream started to emerge in which people would be able to <strong>share components across frameworks</strong>, independent whether you use Angular, Vue or React or even just a plain old HTML page. How many times did you re-implement that datepicker control? Your modal dialog window? Yea I know&hellip; 😒.</p>

<p>Well guess what, there is a browser native API (under the umbrella term of Web Components) called “Custom Elements” that allows you to define and register new tags:</p>
<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="nx">customElements</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;hello-world&#39;</span><span class="p">,</span> <span class="nx">HelloWorld</span><span class="p">)</span></code></pre></div>
<p>Here, <code>HelloWorld</code> is a JavaScript class usually extending <code>HTMLElement</code>. You can <a href="[https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements)">read more here</a>.</p>

<p>Angular has a library which you can find in <code>@angular/elements</code> that makes it easy to take an Angular component, wrap it s.t. it is compatible with the Custom Elements API, s.t. you can then register it using the <code>customElements.define(...)</code> function we’ve just seen. Usually that looks something like</p>
<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createCustomElement</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@angular/elements&#39;</span>

<span class="p">...</span>

<span class="kr">const</span> <span class="nx">myWrappedEl</span> <span class="o">=</span> <span class="nx">createCustomElement</span><span class="p">(</span><span class="nx">GreeterComponent</span><span class="p">,</span> <span class="p">{</span> <span class="nx">injector</span>: <span class="kt">injector</span> <span class="p">});</span>
<span class="nx">customElements</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;hello-world&#39;</span><span class="p">,</span> <span class="nx">myWrappedEl</span><span class="p">);</span></code></pre></div>
<p>As you can see we use the <code>createCustomElement</code> utility function defined by <code>@angular/elements</code> passing in our Angular component <code>GreeterComponent</code>. Then we can pass the wrapped component ahead to the browser native <code>customElements.define(...)</code> function.</p>

<p>If you wanna know more, check out <a href="[https://juristr.com/blog/2019/04/intro-to-angular-elements/](/blog/2019/04/intro-to-angular-elements/)">my article and Egghead course that introduces Angular Elements step by step</a>.</p>

<h2 id="how-do-angular-elements-help-with-lazy-loading">How do Angular Elements help with Lazy Loading?</h2>

<p>Well the idea came to my mind when looking at existing libraries for lazy loading Angular components, such as</p>

<ul>
<li><a href="https://www.npmjs.com/package/@herodevs/hero-loader">https://www.npmjs.com/package/@herodevs/hero-loader</a></li>
<li><a href="https://www.npmjs.com/package/ngx-loadable">https://www.npmjs.com/package/ngx-loadable</a></li>
</ul>

<p>Those are awesome libraries that aim to help you to lazy load components in the template. Since Angular doesn’t support lazy loading of components out of the box (yet, Ivy will change that 🔥), these libs have to find a way around it. As a result, many do something like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">lazy-load-placeholder</span> <span class="na">selector</span><span class="o">=</span><span class="s">&#34;hello-world&#34;</span> <span class="na">module</span><span class="o">=</span><span class="s">&#34;./hello-world/hello-world.module&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">lazy-load-placeholder</span><span class="p">&gt;</span></code></pre></div>
<p>However, this approach makes it hard to do native <code>@Input</code> and <code>@Output</code> bindings as you would normally do with Angular components. The main reason is that the components get instantiated programmatically (in your TS code). So if you need to pass in Input/Output properties, you’d have to do that in your TS code. That could work via some callbacks the lazy loading component exposes, like</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">lazy-load-placeholder</span> <span class="err">...</span> <span class="err">(</span><span class="na">componentLoaded</span><span class="err">)=&#34;</span><span class="na">onComponentLoaded</span><span class="err">($</span><span class="na">event</span><span class="err">)&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">lazy-load-placeholder</span><span class="p">&gt;</span></code></pre></div>
<p>Inside the <code>onComponentLoaded(...)</code> you could get the component instance passed, and hence you can directly set the input properties.</p>

<p><strong>However I wanted to have a more declarative approach</strong> that lets you use your components just as you normally do in your Angular templates. So what about Angular Elements. The interesting thing there is that once the Custom Element is registered, the browser will take care of instantiating it and do the proper binding.</p>

<p>Let’s have a concrete look. Assume we have a module <code>GreeterModule</code> that internally registers its components as an Angular Element (just as we learned in the section before).</p>
<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span><span class="nx">GreeterComponent</span><span class="p">],</span>
    <span class="p">...</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">GreeterModule</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span><span class="nx">injector</span>: <span class="kt">Injector</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">myWrappedEl</span> <span class="o">=</span> <span class="nx">createCustomElement</span><span class="p">(</span><span class="nx">GreeterComponent</span><span class="p">,</span> <span class="p">{</span> <span class="nx">injector</span>: <span class="kt">injector</span> <span class="p">});</span>
      <span class="nx">customElements</span><span class="p">.</span><span class="nx">define</span><span class="p">(</span><span class="s1">&#39;hello-world&#39;</span><span class="p">,</span> <span class="nx">myWrappedEl</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span></code></pre></div>
<p>Assume now we <strong>lazy loading</strong> the <code>GreeterModule</code> using the technique I described in <a href="/blog/2019/10/lazyload-module-ivy-viewengine">my related article</a>. Once the <code>GreeterModule</code> gets loaded on the fly and instantiated, the constructor will be called and as a consequence the Angular Element will be registered. Now, the <strong>browser knows</strong> about our tag and we can just literally paste it into the DOM to have it being instantiate and work.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">hello-world</span><span class="p">&gt;&lt;/</span><span class="nt">hello-world</span><span class="p">&gt;</span></code></pre></div>
<p>Since Custom Elements are first class citizens in Angular, you can also use input and output bindings.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">hello-world</span> <span class="err">[</span><span class="na">name</span><span class="err">]=&#34;</span><span class="na">person</span><span class="err">.</span><span class="na">name</span><span class="err">&#34;</span> <span class="err">(</span><span class="na">greet</span><span class="err">)=&#34;</span><span class="na">onGreet</span><span class="err">($</span><span class="na">event</span><span class="err">)&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">hello-world</span><span class="p">&gt;</span></code></pre></div>
<p>This will just work! Actually, you couldn’t even tell whether you’re looking at a component or Angular Element.</p>

<h2 id="lazy-loading-with-ngx-lazy-el">Lazy loading with ngx-lazy-el</h2>

<p>Now that you know the mechanism, I actually created a libary that automates the lazy loading with Angular Elements for you.</p>

<div class="article-link card">
    <div class="row">
        <div class="col-2 share-link">
            <a href="https://github.com/juristr/ngx-lazy-el" target="_blank">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-8 mr-4 icon-external-window">
                    <path class="primary" d="M12 8a1 1 0 0 1-1 1H5v10h10v-6a1 1 0 0 1 2 0v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2h6a1 1 0 0 1 1 1z"></path>
                    <path class="secondary" d="M19 6.41L8.7 16.71a1 1 0 1 1-1.4-1.42L17.58 5H14a1 1 0 0 1 0-2h6a1 1 0 0 1 1 1v6a1 1 0 0 1-2 0V6.41z"></path>
                </svg>
            </a>
        </div>
        <div class="col-10">
            <div class="title"><a href="https://github.com/juristr/ngx-lazy-el" target="_blank">GitHub: ngx-lazy-el</a></div>
            <div class="description"></div>
            <div class="link">
                https://github.com/juristr/ngx-lazy-el
            </div>
        </div>
    </div>
</div>

<p>After installing the libary, expose the component on your lazy loaded module that you’d like to have wrapped and lazy loaded as Angular element.</p>
<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">declarations</span><span class="o">:</span> <span class="p">[</span><span class="nx">GreeterComponent</span><span class="p">]</span>
    <span class="p">...</span>
<span class="p">})</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">GreeterModule</span> <span class="p">{</span>
    <span class="nx">customElementComponent</span>: <span class="kt">Type</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nx">GreeterComponent</span>
<span class="p">}</span></code></pre></div>
<p>The <code>ngx-lazy-el</code> library will read the <code>customElementComponent</code> to know which component should automatically be wrapped as Angular Element.</p>

<p>Next, go to your <code>AppModule</code> to define the lazy configuration, very much just like you might be accustomed with the Angular router:</p>
<div class="highlight"><pre class="chroma"><code class="language-typescript" data-lang="typescript"><span class="kr">const</span> <span class="nx">lazyConfig</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">selector</span><span class="o">:</span> <span class="s1">&#39;hello-world&#39;</span><span class="p">,</span>
      <span class="nx">loadChildren</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="kr">import</span><span class="p">(</span><span class="s1">&#39;./greeter/greeter.module&#39;</span><span class="p">).</span><span class="nx">then</span><span class="p">((</span><span class="nx">m</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">GreeterModule</span><span class="p">)</span>
<span class="p">];</span>

<span class="kd">@NgModule</span><span class="p">({</span>
    <span class="nx">imports</span><span class="o">:</span> <span class="p">[</span>
      <span class="nx">NgxLazyModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">lazyConfig</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">})</span></code></pre></div>
<p>After having configured our lazy module, we can just start using our component <strong>with the selector specified in the lazyConfig</strong>. For example:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="err">*</span><span class="na">ngIf</span><span class="o">=</span><span class="s">&#34;isVisible&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">hello-world</span> <span class="err">*</span><span class="na">ngxLazyEl</span> <span class="err">[</span><span class="na">name</span><span class="err">]=&#34;</span><span class="na">person</span><span class="err">.</span><span class="na">name</span><span class="err">&#34;</span> <span class="err">(</span><span class="na">greet</span><span class="err">)=&#34;</span><span class="na">onGreet</span><span class="err">($</span><span class="na">event</span><span class="err">)&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">hello-world</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<p>Note the <code>*ngxLazyEl</code> directive. It is responsible for actually reading the tag name (<code>hello-world</code>) and looking up the <code>lazyConfig</code> to find the lazy module to load, load it and once it is loaded, it will render the <code>&lt;hello-world&gt;</code> into the DOM where then the browser takes over. That’s it. Whenever <code>isVisible</code> is true, the <code>GreeterModule</code> would be lazily loaded over the network, its <code>customElementComponent</code> (in this example our <code>GreeterComponent</code>) would be wrapped as an Angular Element and then shown on the page.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Definitely check out the video linked at the very beginning oft this article where I walk you step by step though the process of lazy loading with <a href="https://github.com/juristr/ngx-lazy-el">ngx-lazy-el</a>. Other than that, you should now have some understanding</p>

<ul>
<li>what we need to “lazy load a component”</li>
<li>an overview of what Angular Elements are about</li>
<li>how Angular Elements can potentially help with lazyl loading</li>
<li>how to use the ngx-lazy-el library</li>
</ul>

<p>Questions? Ping me on <a href="https://twitter.com/juristr">Twitter</a>.</p>


				<hr />

				Questions? Thoughts? Hit me up <a href="https://twitter.com/juristr" target="_blank">on Twitter</a>
            </div>

            
            <div class="after-post-tags">
                <ul class="tags">
                    
                    <li>
                        <a href="/tags/angular">angular</a>
                    </li>
                    
                    <li>
                        <a href="/tags/web-performance">web performance</a>
                    </li>
                    
                </ul>
            </div>
            

            <a href="https://egghead.io/instructors/juri-strumpflohner" class="external-link" data-client="eggheadio"
                data-uid="egghead-instructor-page">
                <img src="/blog/assets/imgs/egghead-banner-learn-with-me.png" style="width:100%" />
            </a>

            
            
            
        </div>
        
    </div>
</div>

<div class="hideshare"></div>



<div class="related-container">
    <div class="container">
        <div class="row listrecent listrelated">
            
            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2019/10/lazyload-module-ivy-viewengine">Manually Lazy Load an Angular Module with ViewEngine and Ivy</a>
        </h2>
        <h4 class="card-text">
            Find out how to lazy load an NgModule compatible with ViewEngine and Ivy
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Oct 1, 2019</span><span class="dot"></span><span
                                    class="post-read">5 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/angular.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2019/09/debugging-angular-ivy-console">Debugging Angular Ivy Applications from the Devtools Console</a>
        </h2>
        <h4 class="card-text">
            Learn how Ivy allows us to debug our components directly from the browser devtools
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Sep 25, 2019</span><span class="dot"></span><span
                                    class="post-read">3 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/angular.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            

            <div class="col-md-4">
<div class="card">
    
    <div class="card-block">
        <h2 class="card-title">
            <a href="/blog/2019/08/ngperf-precaching-serviceworker">Angular Performance: Precaching with the Service Worker</a>
        </h2>
        <h4 class="card-text">
            Cache your app with Angular&#39;s integrated service worker package
            
        </h4>
        <div class="metafooter">
            <div class="wrapfooter">
                <div class="row">
                    <div class="col-10">
                        
                            <span class="meta-footer-thumb">
                                <a href="/about/">
                                    <img class="author-thumb" src="https://www.gravatar.com/avatar/64537dfe80f44978663e378d375c7138?s=150&amp;d=identicon&amp;r=PG" alt="Juri Strumpflohner">
                                </a>
                            </span>
                            <span class="author-meta">
                                <span class="post-name"><a href="/about/">Juri Strumpflohner</a></span><br />
                                <span class="post-date">Aug 31, 2019</span><span class="dot"></span><span
                                    class="post-read">1 min read</span>
                            </span>
                        
                    </div>
                    <div class="col-2">
                        
                        
                        
                        <span class="post-category-icon">
                            
                            
                                <img src="/assets/images/categories/angular.svg" />
                            
                        </span>
                        
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    
</div>

            </div>

            
            

        </div>
    </div>
</div>

<div class="container">
    <div id="comments" class="row justify-content-center mb-5">
        <div class="col-md-8">              
            <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "juristr" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>               
        </div>
    </div>
</div>



<script type="text/javascript" src="//downloads.mailchimp.com/js/signup-forms/popup/unique-methods/embed.js" data-dojo-config="usePlainJson: true, isDebug: false"></script><script type="text/javascript">window.dojoRequire(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us4.list-manage.com","uuid":"04e83acc0ba14b18f30435204","lid":"1d83b68321","uniqueMethods":true}) })</script>
<div class="container">
    
<div class="footer">
    <p class="pull-left">
        &copy; Copyright Juri Strumpflohner - All rights reserved
    </p>
    <p class="pull-right">
        Customized Mediumish Theme, originally by <a target="_blank" href="https://www.wowthemes.net">WowThemes.net</a>
    </p>
    <div class="clearfix">
    </div>
</div>


</div>

    </div>

<script src="/js/jquery.min.js"></script>


<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>




<script type="text/javascript" src="/js/bundle.js" integrity=""></script>


<script src="/js/jquery.fluidbox.min.js"></script>
<script>
    $('a.image--zoom,.gallery>a').fluidbox();
</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-416229-12', 'juristr.com');
    ga('require', 'displayfeatures');
    ga('send', 'pageview');
  </script>






    
    <script type="text/javascript">
        window.cookieconsent_options = {
            "message": "This website uses cookies to ensure you get the best experience on our website",
            "dismiss": "Got it!",
            "learnMore": "More info",
            "link": null,
            "theme": "dark-bottom"
        };
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js" defer></script>
    

    
    
    
    <script>
!function(t,e,a,c,x){var s='q';t[s]={publication_id:c,tags:x};
var s=e.createElement(a),r=e.getElementsByTagName(a)[0];s.async=1,s.src=
'https://insights.quiet.ly/app/analytics.min.js',r.parentNode.insertBefore(s,r)}
(window,document,'script','87bcee90-0c51-4a68-a60b-e95df730d1ca','[]');
</script>
    
 <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>

</html>
